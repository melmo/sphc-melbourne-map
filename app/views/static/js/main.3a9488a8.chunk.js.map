{"version":3,"sources":["http-common.js","services/auth-header.js","services/location.service.js","services/auth.service.js","components/add-location.component.js","components/location.component.js","components/locations-list.component.js","services/user.service.js","components/add-user.component.js","components/user.component.js","components/users-list.component.js","components/private-route.component.js","components/login.component.js","components/reset-password.component.js","components/request-token.component.js","components/home.component.js","components/profile.component.js","App.js","components/board-user.component.js","components/board-moderator.component.js","components/board-admin.component.js","serviceWorker.js","index.js"],"names":["axios","create","baseURL","headers","authHeader","user","JSON","parse","localStorage","getItem","accessToken","http","get","id","data","post","put","delete","title","API_URL","email","password","then","response","setItem","stringify","removeItem","username","token","AddLocation","props","onChangeTitle","bind","onChangeDescription","saveLocation","newLocation","state","description","published","submitted","loggedInUser","isLoggedIn","isMod","isAdmin","AuthService","getCurrentUser","this","setState","roles","includes","e","target","value","authorId","LocationDataService","catch","console","log","className","href","onClick","htmlFor","type","required","onChange","name","Component","Location","getLocation","updatePublished","updateLocation","deleteLocation","currentLocation","message","match","params","prevState","status","update","history","push","LocationsList","onChangeSearchTitle","retrieveLocations","refreshList","setActiveLocation","removeAllLocations","searchTitle","locations","currentIndex","getAll","location","index","deleteAll","findByTitle","placeholder","map","to","role","isEmail","vusername","length","vpassword","AddUser","onChangeUsername","onChangePassword","onChangeRole","onChangeEmail","saveUser","newUser","success","preventDefault","form","validateAll","checkBtn","context","_errors","UserDataService","onSubmit","ref","c","validations","style","display","User","onChangeDoUpdatePassword","onChangeRoleId","getUser","updateUser","deleteUser","currentUser","roleId","newPassword","doUpdatePassword","undefined","updatePassword","disabled","0","1","2","3","UsersList","onChangeSearchUsername","retrieveUsers","setActiveUser","removeAllUsers","searchUsername","users","currentUsername","findByUsername","PrivateRoute","component","auth","authCheckComplete","rest","render","pathname","from","Login","handleLogin","loading","login","window","error","resMessage","toString","src","alt","ResetPassword","resetPassword","checkToken","RequestToken","requestToken","Home","content","Profile","App","logOut","logout","exact","path","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3a9488a8.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport default axios.create({\r\n  baseURL: \"http://localhost:8080/api\",\r\n  headers: {\r\n    \"Content-type\": \"application/json\"\r\n  }\r\n});","export default function authHeader() {\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  if (user && user.accessToken) {\r\n    // for Node.js Express back-end\r\n    return { 'x-access-token': user.accessToken };\r\n  } else {\r\n    return {};\r\n  }\r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass LocationDataService {\r\n  getAll() {\r\n    return http.get(\"/locations\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/locations/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/locations\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/locations/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/locations/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  deleteAll() {\r\n    return http.delete(`/locations`, { headers: authHeader() });\r\n  }\r\n\r\n  findByTitle(title) {\r\n    return http.get(`/locations?title=${title}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new LocationDataService();","import axios from \"axios\";\r\n\r\nconst API_URL = \"http://localhost:8080/api/auth/\";\r\n\r\nclass AuthService {\r\n  login(email, password) {\r\n    return axios\r\n      .post(API_URL + \"signin\", {\r\n        email,\r\n        password\r\n      })\r\n      .then(response => {\r\n        if (response.data.accessToken) {\r\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n        }\r\n\r\n        return response.data;\r\n      });\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem(\"user\");\r\n  }\r\n\r\n  register(username, email, password) {\r\n    return axios.post(API_URL + \"signup\", {\r\n      username,\r\n      email,\r\n      password\r\n    });\r\n  }\r\n\r\n  getCurrentUser() {\r\n    return JSON.parse(localStorage.getItem('user'));;\r\n  }\r\n\r\n  requestToken(email) {\r\n    return axios\r\n      .post(API_URL + \"request-token\", {\r\n        email\r\n      })\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n\r\n  checkToken(id,token) {\r\n    return axios\r\n      .post(API_URL + \"check-token\", {\r\n        id,\r\n        token\r\n      })\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n  resetPassword(email, token, id,password) {\r\n    return axios\r\n      .post(API_URL + \"reset-password\", {\r\n        email,\r\n        token,\r\n        id,\r\n        password\r\n      })\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n}\r\n\r\nexport default new AuthService();","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\n\r\nexport default class AddLocation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeTitle = this.onChangeTitle.bind(this);\r\n    this.onChangeDescription = this.onChangeDescription.bind(this);\r\n    this.saveLocation = this.saveLocation.bind(this);\r\n    this.newLocation = this.newLocation.bind(this);\r\n\r\n    this.state = {\r\n      id: null,\r\n      title: \"\",\r\n      description: \"\", \r\n      published: false,\r\n      submitted: false,\r\n      loggedInUser: null,\r\n      isLoggedIn:false,\r\n      isMod: false,\r\n      isAdmin: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n  }\r\n\r\n  onChangeTitle(e) {\r\n    this.setState({\r\n      title: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeDescription(e) {\r\n    this.setState({\r\n      description: e.target.value\r\n    });\r\n  }\r\n\r\n  saveLocation() {\r\n    var data = {\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      authorId:this.state.loggedInUser\r\n    };\r\n\r\n    LocationDataService.create(data)\r\n      .then(response => {\r\n        this.setState({\r\n          id: response.data.id,\r\n          title: response.data.title,\r\n          description: response.data.description,\r\n          published: response.data.published,\r\n          submitted: true\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  newLocation() {\r\n    this.setState({\r\n      id: null,\r\n      title: \"\",\r\n      description: \"\",\r\n      published: false,\r\n      submitted: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"submit-form\">\r\n        {this.state.submitted ? (\r\n          <div>\r\n            <h4>You submitted successfully!</h4>\r\n            <a className=\"btn\" href={'/admin/locations/' + this.state.id}>\r\n              View location\r\n            </a>\r\n            <button className=\"btn btn-success\" onClick={this.newLocation}>\r\n              Add another location\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"title\">Title</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"title\"\r\n                required\r\n                value={this.state.title}\r\n                onChange={this.onChangeTitle}\r\n                name=\"title\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"description\">Description</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"description\"\r\n                required\r\n                value={this.state.description}\r\n                onChange={this.onChangeDescription}\r\n                name=\"description\"\r\n              />\r\n            </div>\r\n\r\n            \r\n\r\n            <button onClick={this.saveLocation} className=\"btn btn-success\">\r\n              Submit\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nexport default class Location extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeTitle = this.onChangeTitle.bind(this);\r\n    this.onChangeDescription = this.onChangeDescription.bind(this);\r\n    this.getLocation = this.getLocation.bind(this);\r\n    this.updatePublished = this.updatePublished.bind(this);\r\n    this.updateLocation = this.updateLocation.bind(this);\r\n    this.deleteLocation = this.deleteLocation.bind(this);\r\n\r\n    this.state = {\r\n      currentLocation: {\r\n        id: null,\r\n        title: \"\",\r\n        description: \"\",\r\n        published: false,\r\n        authorId:null\r\n      },\r\n      message: \"\",\r\n      loggedInUser: null,\r\n      isLoggedIn:false,\r\n      isMod: false,\r\n      isAdmin: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n    this.getLocation(this.props.match.params.id);\r\n  }\r\n\r\n  onChangeTitle(e) {\r\n    const title = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentLocation: {\r\n          ...prevState.currentLocation,\r\n          title: title\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeDescription(e) {\r\n    const description = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        description: description\r\n      }\r\n    }));\r\n  }\r\n\r\n  getLocation(id) {\r\n    LocationDataService.get(id)\r\n      .then(response => {\r\n        this.setState({\r\n          currentLocation: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  updatePublished(status) {\r\n    var data = {\r\n      id: this.state.currentLocation.id,\r\n      title: this.state.currentLocation.title,\r\n      description: this.state.currentLocation.description,\r\n      published: status,\r\n      authorId:this.state.currentLocation.authorId,\r\n      loggedInUser:this.state.loggedInUser\r\n    };\r\n\r\n    LocationDataService.update(this.state.currentLocation.id, data)\r\n      .then(response => {\r\n        this.setState(prevState => ({\r\n          currentLocation: {\r\n            ...prevState.currentLocation,\r\n            published: status\r\n          },\r\n          message : response.data.message\r\n        }));\r\n        this.getLocation(this.state.currentLocation.id);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n        this.getLocation(this.state.currentLocation.id);\r\n      });\r\n  }\r\n\r\n  updateLocation() {\r\n    LocationDataService.update(\r\n      this.state.currentLocation.id,\r\n      this.state.currentLocation\r\n    )\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState({\r\n          message: response.data.message\r\n        });\r\n        this.getLocation(this.state.currentLocation.id);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n        this.getLocation(this.state.currentLocation.id);\r\n      });\r\n  }\r\n\r\n  deleteLocation() {    \r\n    LocationDataService.delete(this.state.currentLocation.id)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.props.history.push('/locations')\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { currentLocation } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        {currentLocation ? (\r\n          <div className=\"edit-form\">\r\n            <h4>Location</h4>\r\n            <form>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"title\">Title</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"title\"\r\n                  value={currentLocation.title}\r\n                  onChange={this.onChangeTitle}\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"description\">Description</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"description\"\r\n                  value={currentLocation.description}\r\n                  onChange={this.onChangeDescription}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>\r\n                  <strong>Status:</strong>\r\n                </label>\r\n                {currentLocation.published ? \"Published\" : \"Pending\"}\r\n              </div>\r\n            </form>\r\n\r\n            \r\n            {(this.state.loggedInUser == currentLocation.authorId || this.state.isMod || this.state.isAdmin) && (\r\n                <button\r\n                  className=\"badge badge-primary mr-2\"\r\n                  onClick={() => this.updatePublished(!currentLocation.published)}\r\n                >\r\n                  {currentLocation.published ? (\"UnPublish\") : (\"Publish\") }\r\n                </button>\r\n               )} \r\n\r\n                {(this.state.loggedInUser == currentLocation.authorId || this.state.isMod || this.state.isAdmin) && (\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"badge badge-success mr-2\"\r\n                  onClick={this.updateLocation}\r\n                >\r\n                  Update\r\n                </button>\r\n                )}\r\n\r\n\r\n\r\n            {this.state.isAdmin && (\r\n                <button\r\n                  className=\"badge badge-danger\"\r\n                  onClick={this.deleteLocation}\r\n                >\r\n                  Delete\r\n                </button>\r\n              )}\r\n\r\n\r\n            <p>{this.state.message}</p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <br />\r\n            <p>Please click on a Location...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class LocationsList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeSearchTitle = this.onChangeSearchTitle.bind(this);\r\n    this.retrieveLocations = this.retrieveLocations.bind(this);\r\n    this.refreshList = this.refreshList.bind(this);\r\n    this.setActiveLocation = this.setActiveLocation.bind(this);\r\n    this.removeAllLocations = this.removeAllLocations.bind(this);\r\n    this.searchTitle = this.searchTitle.bind(this);\r\n\r\n    this.state = {\r\n      locations: [],\r\n      currentLocation: null,\r\n      currentIndex: -1,\r\n      searchTitle: \"\",\r\n      loggedInUser: null,\r\n      isLoggedIn:false,\r\n      isMod: false,\r\n      isAdmin: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n    this.retrieveLocations();\r\n  }\r\n\r\n  onChangeSearchTitle(e) {\r\n    const searchTitle = e.target.value;\r\n\r\n    this.setState({\r\n      searchTitle: searchTitle\r\n    });\r\n  }\r\n\r\n  retrieveLocations() {\r\n    LocationDataService.getAll()\r\n      .then(response => {\r\n        this.setState({\r\n          locations: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  refreshList() {\r\n    this.retrieveLocations();\r\n    this.setState({\r\n      currentLocation: null,\r\n      currentIndex: -1\r\n    });\r\n  }\r\n\r\n  setActiveLocation(location, index) {\r\n    this.setState({\r\n      currentLocation: location,\r\n      currentIndex: index\r\n    });\r\n  }\r\n\r\n  removeAllLocations() {\r\n    LocationDataService.deleteAll()\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.refreshList();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  searchTitle() {\r\n    this.setState({\r\n      currentLocation: null,\r\n      currentIndex: -1\r\n    });\r\n\r\n    LocationDataService.findByTitle(this.state.searchTitle)\r\n      .then(response => {\r\n        this.setState({\r\n          locations: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { searchTitle, locations, currentLocation, currentIndex } = this.state;\r\n\r\n    return (\r\n      <div className=\"list row\">\r\n        <div className=\"col-md-8\">\r\n          <div className=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Search by title\"\r\n              value={searchTitle}\r\n              onChange={this.onChangeSearchTitle}\r\n            />\r\n            <div className=\"input-group-append\">\r\n              <button\r\n                className=\"btn btn-outline-secondary\"\r\n                type=\"button\"\r\n                onClick={this.searchTitle}\r\n              >\r\n                Search\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <h4>Locations List</h4>\r\n\r\n          <ul className=\"list-group\">\r\n            {locations &&\r\n              locations.map((location, index) => (\r\n                <li\r\n                  className={\r\n                    \"list-group-item \" +\r\n                    (index === currentIndex ? \"active\" : \"\")\r\n                  }\r\n                  onClick={() => this.setActiveLocation(location, index)}\r\n                  key={index}\r\n                >\r\n                  {location.title}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n\r\n          \r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          {currentLocation ? (\r\n            <div>\r\n              <h4>Location</h4>\r\n              <div>\r\n                <label>\r\n                  <strong>Title:</strong>\r\n                </label>{\" \"}\r\n                {currentLocation.title}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Description:</strong>\r\n                </label>{\" \"}\r\n                {currentLocation.description}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Status:</strong>\r\n                </label>{\" \"}\r\n                {currentLocation.published ? \"Published\" : \"Pending\"}\r\n              </div>\r\n              {(this.state.loggedInUser == currentLocation.authorId || this.state.isMod || this.state.isAdmin) && (\r\n                <Link\r\n                  to={\"/admin/locations/\" + currentLocation.id}\r\n                  className=\"badge badge-warning\"\r\n                >\r\n                  Edit\r\n                </Link>\r\n              )}\r\n              \r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <br />\r\n              <p>Please click on a Location...</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass UserDataService {\r\n  getAll() {\r\n    return http.get(\"/users\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/users/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/users\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/users/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/users/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  deleteAll() {\r\n    return http.delete(`/users`, { headers: authHeader() });\r\n  }\r\n\r\n  findByUsername(username) {\r\n    return http.get(`/users?username=${username}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new UserDataService();\r\n\r\n\r\n/*\r\nimport axios from 'axios';\r\nimport authHeader from './auth-header';\r\n\r\nconst API_URL = 'http://localhost:8080/api/restricted/';\r\n\r\nclass UserService {\r\n  getPublicContent() {\r\n    return axios.get(API_URL + 'all');\r\n  }\r\n\r\n  getUserBoard() {\r\n    return axios.get(API_URL + 'user', { headers: authHeader() });\r\n  }\r\n\r\n  getModeratorBoard() {\r\n    return axios.get(API_URL + 'mod', { headers: authHeader() });\r\n  }\r\n\r\n  getAdminBoard() {\r\n    return axios.get(API_URL + 'admin', { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new UserService();\r\n\r\n*/","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\nimport UserDataService from \"../services/user.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vusername = value => {\r\n  if (value.length < 3 || value.length > 20) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The username must be between 3 and 20 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = value => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class AddUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeUsername = this.onChangeUsername.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n    this.onChangeRole = this.onChangeRole.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.saveUser = this.saveUser.bind(this);\r\n    this.newUser = this.newUser.bind(this);\r\n\r\n    this.state = {\r\n      id: null,\r\n      username: \"\",\r\n      email: \"\", \r\n      role:1,\r\n      password:\"\",\r\n      success: false,\r\n      message:\"\"\r\n    };\r\n  }\r\n\r\n  onChangeUsername(e) {\r\n    this.setState({\r\n      username: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeRole(e) {\r\n    this.setState({\r\n      role: e.target.value\r\n    });\r\n  }\r\n\r\n  saveUser(e) {\r\n    e.preventDefault();\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      var data = {\r\n        user : {\r\n          username: this.state.username,\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n          role:this.state.role\r\n        }\r\n        \r\n      };\r\n\r\n      UserDataService.create(data)\r\n        .then(response => {\r\n          console.log(response);\r\n          if (response.data.success) {\r\n            this.setState({\r\n              id: response.data.user.id,\r\n              username: response.data.user.username,\r\n              email: response.data.user.email,\r\n              role: response.data.user.role,\r\n\r\n              success: response.data.success,\r\n              message:response.data.message\r\n            });\r\n          } else {\r\n            this.setState({\r\n\r\n              success: response.data.success,\r\n              message:response.data.message\r\n            });\r\n          }\r\n          \r\n          console.log(response.data);\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n      }\r\n  }\r\n\r\n  newUser() {\r\n    this.setState({\r\n      id: null,\r\n      email: \"\",\r\n      username: \"\",\r\n      password:\"\",\r\n      role: 1,\r\n      message:\"\",\r\n      success: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"submit-form\">\r\n        {this.state.success ? (\r\n          <div>\r\n            <h4>{this.state.message}</h4>\r\n            <a className=\"btn\" href={'/admin/users/' + this.state.id}>\r\n              View user\r\n            </a>\r\n            <button className=\"btn\" onClick={this.newUser}>\r\n              Add another user\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h4>Add new user</h4>\r\n            <Form\r\n            onSubmit={this.saveUser}\r\n              ref={c => {\r\n                this.form = c;\r\n              }}\r\n            >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"username\">Username</label>\r\n              <Input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"username\"\r\n                validations={[required, vusername]}\r\n                value={this.state.username}\r\n                onChange={this.onChangeUsername}\r\n                name=\"username\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"email\"\r\n                validations={[required, email]}\r\n                value={this.state.email}\r\n                onChange={this.onChangeEmail}\r\n                name=\"email\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"password\"\r\n                validations={[required, vpassword]}\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                name=\"password\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"role\">Role</label>\r\n              <select className=\"form-control\"\r\n                id=\"role\"\r\n                required\r\n                value={this.state.role}\r\n                onChange={this.onChangeRole}\r\n                name=\"role\">\r\n                <option value=\"1\">User</option>\r\n                <option value=\"2\">Moderator</option>\r\n                <option value=\"3\">Admin</option>\r\n              </select>\r\n              \r\n            </div>\r\n\r\n           \r\n\r\n            <button className=\"btn btn-success\">\r\n              Submit\r\n            </button>\r\n            <p>{this.state.message}</p>\r\n\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n            </Form>\r\n          </div>\r\n\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport UserDataService from \"../services/user.service\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vusername = value => {\r\n  if (value.length < 3 || value.length > 20) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The username must be between 3 and 20 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = value => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class User extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeUsername = this.onChangeUsername.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n    this.onChangeDoUpdatePassword = this.onChangeDoUpdatePassword.bind(this);\r\n    this.onChangeRoleId = this.onChangeRoleId.bind(this);\r\n    this.getUser = this.getUser.bind(this);\r\n    this.updateUser = this.updateUser.bind(this);\r\n    this.deleteUser = this.deleteUser.bind(this);\r\n\r\n    this.state = {\r\n      currentUser: {\r\n        id: null,\r\n        username: \"\",\r\n        email: \"\",\r\n        roleId: 0,\r\n        password:\"\"\r\n      },\r\n      message: \"\",\r\n      isLoggedIn:false,\r\n      isAdmin:false,\r\n      isMod:false,\r\n      loggedInUser:0,\r\n      newPassword : \"\",\r\n      doUpdatePassword : false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n\r\n    if (this.props.match !== undefined) {\r\n      this.getUser(this.props.match.params.id);\r\n    } else {\r\n      this.getUser(this.props.id);\r\n    }\r\n    console.log(this.state.currentUser);\r\n  }\r\n\r\n  onChangeDoUpdatePassword(e) {\r\n    this.setState({\r\n      doUpdatePassword : !this.state.doUpdatePassword\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    const newPassword = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentUser: {\r\n          ...prevState.currentUser,\r\n          password: newPassword\r\n        },\r\n        newPassword:newPassword\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeUsername(e) {\r\n    const username = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentUser: {\r\n          ...prevState.currentUser,\r\n          username: username\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    const email = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentUser: {\r\n        ...prevState.currentUser,\r\n        email: email\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeRoleId(e) {\r\n    const roleId = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentUser: {\r\n        ...prevState.currentUser,\r\n        roleId: roleId\r\n      }\r\n    }));\r\n  }\r\n\r\n  getUser(id) {\r\n    UserDataService.get(id)\r\n      .then(response => {\r\n        this.setState({\r\n          currentUser: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  updateUser(e) {\r\n\r\n    e.preventDefault();\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n\r\n      UserDataService.update(\r\n        this.state.currentUser.id, { \r\n          user : this.state.currentUser,\r\n          updatePassword : this.state.newPassword ? true : false\r\n        }\r\n        \r\n      )\r\n        .then(response => {\r\n          console.log(\"updated\");\r\n          console.log(response.data);\r\n          this.getUser(this.state.currentUser.id);\r\n          this.setState(function (prevState) {\r\n            return {\r\n              message: response.data.message,\r\n              newPassword:\"\",\r\n              doUpdatePassword : false\r\n            }\r\n            \r\n          });\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n      }\r\n  }\r\n\r\n  deleteUser() {    \r\n    UserDataService.delete(this.state.currentUser.id)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.props.history.push('/admin/users')\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { currentUser, isAdmin, loggedInUser, newPassword, doUpdatePassword } = this.state;\r\n\r\n    var roles = {\r\n      0 : \"\",\r\n      1 : \"User\",\r\n      2 : \"Moderator\",\r\n      3 : \"Admin\"\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        {currentUser ? (\r\n          <div className=\"edit-form\">\r\n            <h4>{currentUser.username}</h4>\r\n            <Form\r\n              onSubmit={this.saveUser}\r\n              ref={c => {\r\n                this.form = c;\r\n              }}\r\n            >\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"username\">Username</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"username\"\r\n                  validations={[required, vusername]}\r\n                  value={currentUser.username}\r\n                  onChange={this.onChangeUsername}\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"email\">Email</label>\r\n                <Input\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  id=\"email\"\r\n                  validations={[required, email]}\r\n                  value={currentUser.email}\r\n                  onChange={this.onChangeEmail}\r\n                />\r\n              </div>\r\n             \r\n              {isAdmin && loggedInUser !== currentUser.id ? (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"roleId\">Role</label>\r\n                  <select className=\"form-control\"\r\n                    id=\"roleId\"\r\n                    required\r\n                    value={currentUser.roleId}\r\n                    onChange={this.onChangeRoleId}\r\n                    name=\"roleId\">\r\n                    <option value=\"1\">User</option>\r\n                    <option value=\"2\">Moderator</option>\r\n                    <option value=\"3\">Admin</option>\r\n                  </select>\r\n                </div>\r\n              ) : (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"roleDisplay\">Role</label>\r\n                  <Input disabled \r\n                    className=\"form-control\" \r\n                    id=\"roleDisplay\" \r\n                    name=\"roleDisplay\"\r\n                    value={roles[currentUser.roleId]}\r\n                    />\r\n                </div>\r\n              )\r\n              }\r\n              {((isAdmin || loggedInUser === currentUser.id) && !doUpdatePassword) && (\r\n                <div className=\"form-group\">\r\n                  <button\r\n                    className=\"badge\"\r\n                    onClick={this.onChangeDoUpdatePassword}\r\n                  >\r\n                    Change password\r\n                  </button>\r\n                </div>\r\n              )\r\n              }\r\n               {((isAdmin || loggedInUser === currentUser.id) && doUpdatePassword) && (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"password\">Password</label>\r\n                  <Input \r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    id=\"password\"\r\n                    validations={[vpassword]}\r\n                    value={newPassword}\r\n                    onChange={this.onChangePassword}\r\n                    name=\"password\"\r\n                  />\r\n                </div>\r\n              )\r\n              }\r\n            \r\n            {(isAdmin && loggedInUser !== currentUser.id) && (\r\n            <button\r\n              className=\"badge badge-danger mr-2\"\r\n              onClick={this.deleteUser}\r\n            >\r\n              Delete\r\n            </button>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"badge badge-success\"\r\n              onClick={this.updateUser}\r\n            >\r\n              Update\r\n            </button>\r\n\r\n\r\n              <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n              \r\n            </Form>\r\n\r\n            \r\n             \r\n            \r\n            \r\n            <p>{this.state.message}</p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <br />\r\n            <p>Please click on a User...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport UserDataService from \"../services/user.service\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class UsersList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeSearchUsername = this.onChangeSearchUsername.bind(this);\r\n    this.retrieveUsers = this.retrieveUsers.bind(this);\r\n    this.refreshList = this.refreshList.bind(this);\r\n    this.setActiveUser = this.setActiveUser.bind(this);\r\n    this.removeAllUsers = this.removeAllUsers.bind(this);\r\n    this.searchUsername = this.searchUsername.bind(this);\r\n\r\n    this.state = {\r\n      users: [],\r\n      currentUser: null,\r\n      currentIndex: -1,\r\n      searchUsername: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.retrieveUsers();\r\n  }\r\n\r\n  onChangeSearchUsername(e) {\r\n    const searchUsername = e.target.value;\r\n\r\n    this.setState({\r\n      searchUsername: searchUsername\r\n    });\r\n  }\r\n\r\n  retrieveUsers() {\r\n    UserDataService.getAll()\r\n      .then(response => {\r\n        this.setState({\r\n          users: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  refreshList() {\r\n    this.retrieveUsers();\r\n    this.setState({\r\n      currentUser: null,\r\n      currentIndex: -1\r\n    });\r\n  }\r\n\r\n  setActiveUser(user, index) {\r\n    this.setState({\r\n      currentUser: user,\r\n      currentIndex: index\r\n    });\r\n  }\r\n\r\n  removeAllUsers() {\r\n    UserDataService.deleteAll()\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.refreshList();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  searchUsername() {\r\n    this.setState({\r\n      currentUsername: null,\r\n      currentIndex: -1\r\n    });\r\n\r\n    UserDataService.findByUsername(this.state.searchUsername)\r\n      .then(response => {\r\n        this.setState({\r\n          users: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { searchUsername, users, currentUser, currentIndex } = this.state;\r\n\r\n    return (\r\n      <div className=\"list row\">\r\n        <div className=\"col-md-8\">\r\n          <div className=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Search by username\"\r\n              value={searchUsername}\r\n              onChange={this.onChangeSearchUsername}\r\n            />\r\n            <div className=\"input-group-append\">\r\n              <button\r\n                className=\"btn btn-outline-secondary\"\r\n                type=\"button\"\r\n                onClick={this.searchUsername}\r\n              >\r\n                Search\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <h4>Users List</h4>\r\n\r\n          <ul className=\"list-group\">\r\n            {users &&\r\n              users.map((user, index) => (\r\n                <li\r\n                  className={\r\n                    \"list-group-item \" +\r\n                    (index === currentIndex ? \"active\" : \"\")\r\n                  }\r\n                  onClick={() => this.setActiveUser(user, index)}\r\n                  key={index}\r\n                >\r\n                  {user.username}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n\r\n          \r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          {currentUser ? (\r\n            <div>\r\n              <h4>User</h4>\r\n              <div>\r\n                <label>\r\n                  <strong>Username:</strong>\r\n                </label>{\" \"}\r\n                {currentUser.username}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Email:</strong>\r\n                </label>{\" \"}\r\n                {currentUser.email}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Role:</strong>\r\n                </label>{\" \"}\r\n                {currentUser.role}\r\n              </div>\r\n\r\n              <Link\r\n                to={\"/admin/users/\" + currentUser.id}\r\n                className=\"badge badge-warning\"\r\n              >\r\n                Edit\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <br />\r\n              <p>Please click on a user</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\n\r\nexport default function PrivateRoute ({component: Component, auth, authCheckComplete, ...rest}) {\r\n\tconsole.log(\"auth: \" + auth);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => authCheckComplete === false\r\n      \t? <div></div>\r\n      \t: auth === true\r\n        \t? <Component {...props} />\r\n        \t: <Redirect to={{pathname: '/login', state: {from: props.location}}} />}\r\n    />\r\n  )\r\n}\r\n\r\n\r\n\r\n/*\r\n\r\nexport default class PrivateRoute extends Component {\r\n\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn(\r\n\t\t\t<Route\r\n\t\t      {...this.rest}\r\n\t\t      render={(props) => this.auth === false\r\n\t\t        ? <Component {...this.props} />\r\n\t\t        : <Redirect to={{pathname: '/login', state: {from: props.location}}} />}\r\n\t\t    />\r\n\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n*/","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleLogin = this.handleLogin.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      loading: false,\r\n      message: \"\"\r\n    };\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    });\r\n  }\r\n\r\n  handleLogin(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      loading: true\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      AuthService.login(this.state.email, this.state.password).then(\r\n        () => {\r\n          console.log(this.props);\r\n          //this.props.history.push(\"/profile\");\r\n          //window.location.reload();\r\n          window.location.pathname=\"/admin/locations\";\r\n          \r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            loading: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n          <Form\r\n            onSubmit={this.handleLogin}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                name=\"email\"\r\n                value={this.state.email}\r\n                onChange={this.onChangeEmail}\r\n                validations={[required, email]}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                name=\"password\"\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                validations={[required]}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.loading}\r\n              >\r\n                {this.state.loading && (\r\n                  <span className=\"spinner-border spinner-border-sm\"></span>\r\n                )}\r\n                <span>Login</span>\r\n              </button>\r\n            </div>\r\n\r\n            {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n          <a href=\"./reset-password\">Password reset</a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = value => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class ResetPassword extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.resetPassword = this.resetPassword.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      password:\"\",\r\n      token:\"\",\r\n      id:0,\r\n      loading: true,\r\n      message: \"\",\r\n      success: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.props.match.params);\r\n    if (this.props.match === undefined) {\r\n      this.setState({\r\n        loading:false,\r\n        message : \"No valid token found.\"\r\n      });\r\n    } else {\r\n      AuthService.checkToken(this.props.match.params.id, this.props.match.params.token).then(\r\n        response => {\r\n          console.log(response);\r\n          this.setState({\r\n            loading:false,\r\n            message:response.message,\r\n            token:this.props.match.params.token,\r\n            id:this.props.match.params.id,\r\n            success:response.success\r\n          })\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    });\r\n  }\r\n\r\n  resetPassword(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      loading: true\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      AuthService.resetPassword(\r\n        this.state.email,\r\n        this.state.token,\r\n        this.state.id,\r\n        this.state.password\r\n      ).then(\r\n        (response) => {\r\n          console.log(response);\r\n          this.setState({\r\n            loading: false,\r\n            message: response.message,\r\n            success:response.success\r\n\r\n          });\r\n          \r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            loading: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n\r\n\r\n          <Form\r\n            onSubmit={this.resetPassword}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n\r\n          {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className={this.state.success ? 'alert alert-success' : 'alert alert-danger'} role=\"alert\">\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                name=\"password\"\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                validations={[required, vpassword]}\r\n              />\r\n            </div>\r\n\r\n            \r\n\r\n            <div className=\"form-group\">\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.loading}\r\n              >\r\n                {this.state.loading && (\r\n                  <span className=\"spinner-border spinner-border-sm\"></span>\r\n                )}\r\n                <span>Set new password</span>\r\n              </button>\r\n            </div>\r\n\r\n            \r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class RequestToken extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.requestToken = this.requestToken.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      loading: false,\r\n      message: \"\"\r\n    };\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  requestToken(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      loading: true\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      AuthService.requestToken(this.state.email).then(\r\n        (data) => {\r\n          console.log(data);\r\n          this.setState({\r\n            loading: false,\r\n            message: data.message\r\n          });\r\n          \r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            loading: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n          <Form\r\n            onSubmit={this.requestToken}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                name=\"email\"\r\n                value={this.state.email}\r\n                onChange={this.onChangeEmail}\r\n                validations={[required, email]}\r\n              />\r\n            </div>\r\n\r\n            \r\n\r\n            <div className=\"form-group\">\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.loading}\r\n              >\r\n                {this.state.loading && (\r\n                  <span className=\"spinner-border spinner-border-sm\"></span>\r\n                )}\r\n                <span>Reset password</span>\r\n              </button>\r\n            </div>\r\n\r\n            {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert\" role=\"alert\">\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\n\r\nimport UserService from \"../services/user.service\";\r\n\r\nexport default class Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      content: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <header className=\"jumbotron\">\r\n          <h3>Save Public Housing Collective</h3>\r\n          <h1>Melbourne Estate Map</h1>\r\n          <p>SPHC is working to document the demolition and rebuilding of public housing estates across Melbourne.</p>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport User from \"../components/user.component\";\r\n\r\nexport default class Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentUser: AuthService.getCurrentUser()\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { currentUser } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        \r\n        <User id={currentUser.id}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n/*\r\n\r\n\r\n<header className=\"jumbotron\">\r\n          <h3>\r\n            <strong>{currentUser.username}</strong>\r\n          </h3>\r\n        </header>\r\n        <p>\r\n          <strong>Token:</strong>{\" \"}\r\n          {currentUser.accessToken.substring(0, 20)} ...{\" \"}\r\n          {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\r\n        </p>\r\n        <p>\r\n          <strong>Id:</strong>{\" \"}\r\n          {currentUser.id}\r\n        </p>\r\n        <p>\r\n          <strong>Email:</strong>{\" \"}\r\n          {currentUser.email}\r\n        </p>\r\n        <strong>Authorities:</strong>\r\n        <ul>\r\n          {currentUser.roles &&\r\n            currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\r\n        </ul>\r\n*/","import React, { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\nimport AddLocation from \"./components/add-location.component\";\nimport Location from \"./components/location.component\";\nimport LocationsList from \"./components/locations-list.component\";\n\nimport AddUser from \"./components/add-user.component\";\nimport User from \"./components/user.component\";\nimport UsersList from \"./components/users-list.component\";\n\nimport AuthService from \"./services/auth.service\";\n\nimport PrivateRoute from \"./components/private-route.component\";\nimport Login from \"./components/login.component\";\nimport ResetPassword from \"./components/reset-password.component\";\nimport RequestToken from \"./components/request-token.component\";\nimport Home from \"./components/home.component\";\nimport Profile from \"./components/profile.component\";\nimport BoardUser from \"./components/board-user.component\";\nimport BoardModerator from \"./components/board-moderator.component\";\nimport BoardAdmin from \"./components/board-admin.component\";\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.logOut = this.logOut.bind(this);\n\n    this.state = {\n      authCheckComplete:false,\n      isLoggedIn:false,\n      isMod: false,\n      isAdmin: false,\n      currentUser: undefined,\n    };\n\n    \n  }\n\n  componentDidMount() {\n    const user = AuthService.getCurrentUser();\n    console.log(\"user\");\n    console.log(user);\n    if (user) {\n      this.setState({\n        currentUser: user,\n        isLoggedIn:user?true:false,\n        isMod: user.roles.includes(\"ROLE_MODERATOR\"),\n        isAdmin: user.roles.includes(\"ROLE_ADMIN\"),\n      });\n    }\n    this.setState({\n      authCheckComplete : true\n    });\n  }\n\n  logOut() {\n    AuthService.logout();\n  }\n  render() {\n\n    const { currentUser, isLoggedIn, isMod, isAdmin, authCheckComplete } = this.state;\n    return (\n      <div>\n        <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n          <a href=\"/\" className=\"navbar-brand\">\n            SPHC Melbourne Map\n          </a>\n          {currentUser && (\n            <div className=\"navbar-nav \">\n              <li className=\"nav-item\">\n                <Link to={\"/admin/locations\"} className=\"nav-link\">\n                  Locations\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link to={\"/admin/locations/add\"} className=\"nav-link\">\n                  Add Location\n                </Link>\n              </li>\n            </div>\n            )}\n            \n\n            {isAdmin && (\n              <div className=\"navbar-nav\">\n                <li className=\"nav-item\">\n                  <Link to={\"/admin/users\"} className=\"nav-link\">\n                    Users\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link to={\"/admin/users/add\"} className=\"nav-link\">\n                    Add User\n                  </Link>\n                </li>\n              </div>\n              \n            )}\n\n            \n          \n          {currentUser ? (\n            <div className=\"navbar-nav ml-auto\">\n              <li className=\"nav-item\">\n                <Link to={\"/profile\"} className=\"nav-link\">\n                  My profile\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <a href=\"/login\" className=\"nav-link\" onClick={this.logOut}>\n                  Log out\n                </a>\n              </li>\n            </div>\n          ) : (\n            <div className=\"navbar-nav ml-auto\">\n              <li className=\"nav-item\">\n                <Link to={\"/login\"} className=\"nav-link\">\n                  Log in\n                </Link>\n              </li>\n\n              \n            </div>\n          )}\n\n        </nav>\n\n        <div className=\"container mt-3\">\n          \n            <Switch>\n              <Route exact path={[\"/\", \"/home\"]} component={Home} />\n\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} exact path={[\"/admin/locations\"]} component={LocationsList} />\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} path={[\"/admin/locations/add\"]} component={AddLocation} />\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} path={[\"/admin/locations/:id\"]} component={Location} />\n\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} exact path={[\"/admin/users\"]} component={UsersList} />\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} path={[\"/admin/users/add\"]} component={AddUser} />\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} path={[\"/admin/users/:id\"]} component={User} />\n\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} exact path={[\"/profile\"]} component={Profile} />\n                                \n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/reset-password\" component={RequestToken} />\n              <Route path=\"/reset-password/:id/:token\" component={ResetPassword} />\n\n            </Switch>\n        \n        </div>\n      </div>\n    );\n  }\n\n \n}\n\nexport default App;","import React, { Component } from \"react\";\r\n\r\nimport UserService from \"../services/user.service\";\r\n\r\nexport default class BoardUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      content: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getUserBoard().then(\r\n      response => {\r\n        this.setState({\r\n          content: response.data\r\n        });\r\n      },\r\n      error => {\r\n        this.setState({\r\n          content:\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString()\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <header className=\"jumbotron\">\r\n          <h3>{this.state.content}</h3>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\n\r\nimport UserService from \"../services/user.service\";\r\n\r\nexport default class BoardModerator extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      content: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getModeratorBoard().then(\r\n      response => {\r\n        this.setState({\r\n          content: response.data\r\n        });\r\n      },\r\n      error => {\r\n        this.setState({\r\n          content:\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString()\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <header className=\"jumbotron\">\r\n          <h3>{this.state.content}</h3>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\n\r\nimport UserService from \"../services/user.service\";\r\n\r\nexport default class BoardAdmin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      content: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    UserService.getAdminBoard().then(\r\n      response => {\r\n        this.setState({\r\n          content: response.data\r\n        });\r\n      },\r\n      error => {\r\n        this.setState({\r\n          content:\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString()\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <header className=\"jumbotron\">\r\n          <h3>{this.state.content}</h3>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}