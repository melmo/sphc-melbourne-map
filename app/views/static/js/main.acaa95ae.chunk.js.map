{"version":3,"sources":["http-common.js","services/auth-header.js","services/location.service.js","services/auth.service.js","components/add-location.component.js","services/user.service.js","services/category.service.js","components/tiptap-simple.component.js","services/image.service.js","components/image-library.component.js","services/resident.service.js","components/resident-library.component.js","services/resource.service.js","components/resource-library.component.js","components/edit-location.component.js","components/locations-list.component.js","services/options.service.js","components/zoom-control.component.js","components/map.component.js","components/youtube.component.js","components/location.component.js","components/add-user.component.js","components/user.component.js","components/users-list.component.js","components/private-route.component.js","components/login.component.js","components/reset-password.component.js","components/request-token.component.js","components/home.component.js","components/profile.component.js","components/edit-category.component.js","components/edit-options.component.js","App.js","serviceWorker.js","index.js"],"names":["axios","create","baseURL","process","headers","authHeader","user","JSON","parse","localStorage","getItem","accessToken","http","get","id","data","post","put","delete","title","slug","API_URL","email","password","then","response","setItem","stringify","removeItem","username","token","AddLocation","props","onChangeTitle","bind","onChangeDescription","saveLocation","newLocation","state","description","published","submitted","loggedInUser","isLoggedIn","isMod","isAdmin","AuthService","getCurrentUser","this","setState","roles","includes","e","target","value","authorId","LocationDataService","catch","console","log","className","href","onClick","htmlFor","type","required","onChange","name","Component","TiptapSimple","setLink","Link","options","openOnClick","editor","Editor","content","extensions","defaultExtensions","on","getHTML","commands","setContent","prevProps","prevState","snapshot","url","window","prompt","chain","focus","run","MenuBar","toggleBold","isActive","src","toggleItalic","toggleStrike","unsetLink","toggleHeading","level","toggleBulletList","toggleOrderedList","undo","redo","unsetAllMarks","clearNodes","ImageLibrary","onRemove","onUpdate","onUpload","onChangeCaption","onChangeCopyright","onChangeNewCaption","onChangeNewCopyright","onChangeFile","getImages","images","newImage","copyright","caption","file","location","cb","ImageDataService","findByLocation","files","newImages","map","image","formData","FormData","append","document","getElementById","alert","confirm","find","update","status","length","lead_image","style","onSetLeadImage","getResidents","onChangeName","onChangeStory","onChangeNewName","onChangeNewStory","residents","newResident","story","ResidentDataService","newResidents","resident","ResourceLibrary","onChangeURL","onChangeNewDescription","onToggleIsFile","getResources","resources","newResource","isFile","ResourceDataService","checked","newResources","resource","Location","onChangeSlug","onChangeIntroduction","onChangeHistory","onChangeYoutube","onChangeCallToActionText","onChangeCallToActionLink","onChangeCallToActionButton","onChangeAuthorId","onChangeCategoryId","getLocation","onChangeLatitude","onChangeLongitude","getAuthor","getAllAuthors","getAllCategories","updatePublished","updateLocation","deleteLocation","currentLocation","latitude","longitude","introduction","history","categoryId","call_to_action_text","call_to_action_link","call_to_action_button","message","messageClass","allAuthors","allCategories","match","params","youtube_id","UserDataService","getAll","CategoryDataService","prepareDataForUpdate","push","role","author","index","category","data-lpignore","LocationsList","onChangeSearchTitle","onToggleOwnFilter","retrieveLocations","refreshList","setActiveLocation","removeAllLocations","searchTitle","locations","currentIndex","hideOtherAuthors","findByAuthor","deleteAll","findByTitle","placeholder","defaultChecked","to","mapboxgl","workerClass","MapboxWorker","containerStyle","position","zIndex","display","flexDirection","boxShadow","border","bottom","right","top","left","positions","buttonStyle","backgroundColor","opacity","transition","cursor","height","width","backgroundImage","backgroundPosition","backgroundSize","outline","buttonStyleHovered","buttonStylePlus","borderBottom","borderTopLeftRadius","borderTopRightRadius","buttonStyleMinus","borderBottomLeftRadius","borderBottomRightRadius","ZoomControl","Object","keys","onMouseOut","plusOver","minusOver","onClickPlus","onClickMinus","hover","undefined","zoomTo","getZoom","tabIndex","plusStyle","minusStyle","aria-label","onMouseOver","React","Map","getLocationData","getPublishedLocations","getCategories","formatGeoJSON","initMap","lat","lng","zoom","categories","catColors","mapContainer","createRef","remove","getPublished","forEach","toString","color","container","current","center","getCenter","toFixed","addSource","addLayer","String","fromCharCode","paint","coordinates","features","geometry","slice","properties","Math","abs","lngLat","Popup","setLngLat","setHTML","addTo","getCanvas","obj","geoLocations","ref","YoutubeEmbed","embedId","frameBorder","allow","allowFullScreen","getOptions","findBySlug","OptionsDataService","dots","infinite","speed","slidesToShow","slidesToScroll","autoplay","arrows","dangerouslySetInnerHTML","__html","settings","isEmail","vusername","vpassword","AddUser","onChangeUsername","onChangePassword","onChangeRole","onChangeEmail","saveUser","newUser","success","preventDefault","form","validateAll","checkBtn","context","_errors","onSubmit","c","validations","User","onChangeDoUpdatePassword","onChangeRoleId","getUser","updateUser","deleteUser","currentUser","roleId","newPassword","doUpdatePassword","updatePassword","disabled","0","1","2","3","UsersList","onChangeSearchUsername","retrieveUsers","setActiveUser","removeAllUsers","searchUsername","users","currentUsername","findByUsername","PrivateRoute","component","auth","authCheckComplete","rest","render","pathname","from","Login","handleLogin","loading","login","error","resMessage","alt","ResetPassword","resetPassword","checkToken","RequestToken","requestToken","Home","getLocations","image_url","home_heading","home_text","elementType","wrapAround","pageDots","disableImagesLoaded","reloadOnUpdate","static","Profile","CategoryList","onChangeColor","onChangeNewColor","onCreate","newCategory","newCategories","sort","a","b","parseInt","OptionsEditor","onChangeTextField","onChangeHomeText","field","newOptions","App","logOut","logout","DropdownButton","menuAlign","Dropdown","Item","as","exact","path","EditLocation","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.acaa95ae.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport default axios.create({\r\n  baseURL: process.env.REACT_APP_DOMAIN + \"/api/\" ,\r\n  headers: {\r\n    \"Content-type\": \"application/json\"\r\n  }\r\n});","export default function authHeader() {\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n\r\n  if (user && user.accessToken) {\r\n    // for Node.js Express back-end\r\n    return { 'x-access-token': user.accessToken };\r\n  } else {\r\n    return {};\r\n  }\r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass LocationDataService {\r\n  getAll() {\r\n    return http.get(\"/locations\", { headers: authHeader() });\r\n  }\r\n\r\n  getPublished() {\r\n    return http.get(\"/locations/published\", { headers: authHeader() });\r\n  }\r\n\r\n  getSinglePublished(id) {\r\n    return http.get(`/locations/published/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/locations/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/locations\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/locations/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/locations/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  deleteAll() {\r\n    return http.delete(`/locations`, { headers: authHeader() });\r\n  }\r\n\r\n  findByTitle(title) {\r\n    return http.get(`/locations?title=${title}`, { headers: authHeader() });\r\n  }\r\n\r\n  findBySlug(slug) {\r\n    return http.get(`/locations/slug/${slug}`, { headers: authHeader() });\r\n  }\r\n\r\n  findByAuthor(id) {\r\n    return http.get(`/locations/author/${id}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new LocationDataService();","import axios from \"axios\";\r\n\r\nconst API_URL = process.env.REACT_APP_AUTH_URL;\r\n\r\nclass AuthService {\r\n  login(email, password) {\r\n    return axios\r\n      .post(API_URL + \"signin\", {\r\n        email,\r\n        password\r\n      })\r\n      .then(response => {\r\n        if (response.data.accessToken) {\r\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n        }\r\n\r\n        return response.data;\r\n      });\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem(\"user\");\r\n  }\r\n\r\n  register(username, email, password) {\r\n    return axios.post(API_URL + \"signup\", {\r\n      username,\r\n      email,\r\n      password\r\n    });\r\n  }\r\n\r\n  getCurrentUser() {\r\n    return JSON.parse(localStorage.getItem('user'));;\r\n  }\r\n\r\n  requestToken(email) {\r\n    return axios\r\n      .post(API_URL + \"request-token\", {\r\n        email\r\n      })\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n\r\n  checkToken(id,token) {\r\n    return axios\r\n      .post(API_URL + \"check-token\", {\r\n        id,\r\n        token\r\n      })\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n  resetPassword(email, token, id,password) {\r\n    return axios\r\n      .post(API_URL + \"reset-password\", {\r\n        email,\r\n        token,\r\n        id,\r\n        password\r\n      })\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n}\r\n\r\nexport default new AuthService();","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\n\r\nexport default class AddLocation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeTitle = this.onChangeTitle.bind(this);\r\n    this.onChangeDescription = this.onChangeDescription.bind(this);\r\n    this.saveLocation = this.saveLocation.bind(this);\r\n    this.newLocation = this.newLocation.bind(this);\r\n\r\n    this.state = {\r\n      id: null,\r\n      title: \"\",\r\n      description: \"\", \r\n      published: false,\r\n      submitted: false,\r\n      loggedInUser: null,\r\n      isLoggedIn:false,\r\n      isMod: false,\r\n      isAdmin: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n  }\r\n\r\n  onChangeTitle(e) {\r\n    this.setState({\r\n      title: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeDescription(e) {\r\n    this.setState({\r\n      description: e.target.value\r\n    });\r\n  }\r\n\r\n  saveLocation() {\r\n    var data = {\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      authorId:this.state.loggedInUser\r\n    };\r\n\r\n    LocationDataService.create(data)\r\n      .then(response => {\r\n        this.setState({\r\n          id: response.data.id,\r\n          title: response.data.title,\r\n          description: response.data.description,\r\n          published: response.data.published,\r\n          submitted: true\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  newLocation() {\r\n    this.setState({\r\n      id: null,\r\n      title: \"\",\r\n      description: \"\",\r\n      published: false,\r\n      submitted: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"submit-form\">\r\n        {this.state.submitted ? (\r\n          <div>\r\n            <h4>You submitted successfully!</h4>\r\n            <a className=\"btn\" href={'/admin/locations/' + this.state.id}>\r\n              Edit location\r\n            </a>\r\n            <button className=\"btn btn-success\" onClick={this.newLocation}>\r\n              Add another location\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"title\">Title</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"title\"\r\n                required\r\n                value={this.state.title}\r\n                onChange={this.onChangeTitle}\r\n                name=\"title\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"description\">Description</label>\r\n              <p className=\"small\">Describe the location in one sentence. This will be shown on the map pop ups.</p>\r\n              <textarea\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"description\"\r\n                required\r\n                value={this.state.description}\r\n                onChange={this.onChangeDescription}\r\n                name=\"description\"\r\n              >\r\n              </textarea>\r\n            </div>\r\n\r\n            \r\n\r\n            <button onClick={this.saveLocation} className=\"btn btn-success\">\r\n              Submit\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass UserDataService {\r\n  getAll() {\r\n    return http.get(\"/users\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/users/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/users\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/users/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/users/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  deleteAll() {\r\n    return http.delete(`/users`, { headers: authHeader() });\r\n  }\r\n\r\n  findByUsername(username) {\r\n    return http.get(`/users?username=${username}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new UserDataService();\r\n\r\n","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass CategoryDataService {\r\n  getAll() {\r\n    return http.get(\"/categories\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/categories/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/categories\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/categories/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/categories/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default new CategoryDataService();","import React, { Component } from \"react\";\r\nimport { useEditor, EditorContent,Editor } from '@tiptap/react'\r\nimport { defaultExtensions } from '@tiptap/starter-kit'\r\nimport Link from '@tiptap/extension-link'\r\nimport Document from '@tiptap/extension-document'\r\nimport Paragraph from '@tiptap/extension-paragraph'\r\n\r\nexport default class TiptapSimple extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n\r\n    this.setLink = this.setLink.bind(this);\r\n    console.log(Link);\r\n    Link.options.openOnClick = false;\r\n\r\n  \tthis.state = {\r\n  \t\teditor : new Editor({\r\n\t\t  content: {\r\n\t\t    \"type\": \"doc\",\r\n\t\t    \"content\": [\r\n\t\t      // …\r\n\t\t    ]\r\n\t\t  },\r\n\t\t  extensions: [\r\n\t\t      ...defaultExtensions(),\r\n          Link\r\n\t\t    ],\r\n\t\t  \r\n\t\t})\r\n  \t\r\n  \t};\r\n\r\n  \tthis.state.editor.on('update',({editor}) =>{\r\n  \t\tthis.props.onChange(this.state.editor.getHTML());\r\n  \t});\r\n  }\r\n\r\n  \r\n\r\n  componentDidMount() {\r\n  \tthis.state.editor.commands.setContent(this.props.content);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  \tif (this.props.content !== prevProps.content && this.props.content !== this.state.editor.getHTML()) {\r\n  \t\tthis.state.editor.commands.setContent(this.props.content);\r\n  \t}\r\n\r\n  \t\r\n  }\r\n\r\n setLink() {\r\n  console.log('set link');\r\n    const url = window.prompt('URL');\r\n    console.log(this.state);\r\n    this.state.editor.chain().focus().setLink({ href: url, target:\"_blank\" }).run();\r\n  }\r\n\r\n\r\n  render () {\r\n  \treturn (\r\n\t    <div>\r\n\t      <MenuBar editor={this.state.editor} setLink={this.setLink}/>\r\n\t      <EditorContent editor={this.state.editor} />\r\n\t    </div>\r\n\t  )\r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst MenuBar = ({ editor, setLink }) => {\r\n  if (!editor) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"prosemirror-menu btn-group\">\r\n      <button\r\n      \ttype=\"button\"\r\n        title=\"Bold\"\r\n        onClick={() => editor.chain().focus().toggleBold().run()}\r\n        className={editor.isActive('bold') ? 'btn btn-secondary' : 'btn  btn-secondary'}\r\n      >\r\n        <img src=\"/icons/bold.svg\"/>\r\n        <span className=\"sr-only\">bold</span>\r\n      </button>\r\n      <button\r\n      \ttype=\"button\"\r\n        title=\"Italic\"\r\n        onClick={() => editor.chain().focus().toggleItalic().run()}\r\n        className={editor.isActive('italic') ? 'btn btn-secondary' : 'btn  btn-secondary'}\r\n      >\r\n        <img src=\"/icons/italic.svg\"/>\r\n        <span className=\"sr-only\">italic</span>\r\n      </button>\r\n      <button\r\n      \ttype=\"button\"\r\n        title=\"Strikethrough\"\r\n        onClick={() => editor.chain().focus().toggleStrike().run()}\r\n        className={editor.isActive('strike') ? 'btn btn-secondary' : 'btn  btn-secondary'}\r\n      >\r\n        <img src=\"/icons/strike.svg\"/>\r\n        <span className=\"sr-only\">strike</span>\r\n      </button>\r\n      \r\n      \r\n      <button \r\n      type=\"button\"\r\n      title=\"Add link\"\r\n        onClick={() => setLink()} \r\n        className={editor.isActive('link') ? 'btn btn-secondary' : 'btn  btn-secondary'}>\r\n        <img src=\"/icons/link.svg\"/>\r\n        <span className=\"sr-only\">Add link</span>\r\n        \r\n      </button>\r\n      <button \r\n      type=\"button\"\r\n      title=\"Remove link\"\r\n        onClick={() => editor.chain().focus().unsetLink().run()} \r\n        className={editor.isActive('link') ? 'btn btn-secondary' : 'btn  btn-secondary'}>\r\n        <img src=\"/icons/unlink.svg\"/>\r\n        <span className=\"sr-only\">Remove link</span>\r\n      </button>\r\n\r\n      \r\n      \r\n      <button\r\n      \ttype=\"button\"\r\n        title=\"Heading\"\r\n        onClick={() => editor.chain().focus().toggleHeading({ level: 3 }).run()}\r\n        className={editor.isActive('heading', { level: 3 }) ? 'btn btn-secondary' : 'btn  btn-secondary'}\r\n      >\r\n        H\r\n        <span className=\"sr-only\">heading</span>\r\n      </button>\r\n      \r\n      <button\r\n      \ttype=\"button\"\r\n        title=\"Bullet list\"\r\n        onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n        className={editor.isActive('bulletList') ? 'btn btn-secondary' : 'btn  btn-secondary'}\r\n      >\r\n        <img src=\"/icons/ul.svg\"/>\r\n        <span className=\"sr-only\">bullet list</span>\r\n      </button>\r\n      <button\r\n      title=\"Numbered list\"\r\n      \ttype=\"button\"\r\n        onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n        className={editor.isActive('orderedList') ? 'btn btn-secondary' : 'btn  btn-secondary'}\r\n      >\r\n        <img src=\"/icons/ol.svg\"/>\r\n        <span className=\"sr-only\">numbered list</span>\r\n      </button>\r\n      \r\n      \r\n      \r\n      <button \r\n      \ttype=\"button\"\r\n        title=\"Undo\"\r\n        className=\"btn btn-secondary\"\r\n      \tonClick={() => editor.chain().focus().undo().run()}>\r\n        <img src=\"/icons/undo.svg\"/>\r\n        <span className=\"sr-only\">undo</span>\r\n      </button>\r\n      <button \r\n      \ttype=\"button\"\r\n        title=\"Redo\"\r\n        className=\"btn btn-secondary\"\r\n      \tonClick={() => editor.chain().focus().redo().run()}>\r\n        <img src=\"/icons/redo.svg\"/>\r\n        <span className=\"sr-only\">redo</span>\r\n      </button>\r\n\r\n      <button \r\n        type=\"button\" \r\n\r\n        title=\"Clear formatting\"\r\n        className=\"btn btn-secondary\"\r\n        onClick={() => editor.chain().focus().unsetAllMarks().clearNodes().run()}>\r\n        <img src=\"/icons/remove.svg\"/>\r\n        <span className=\"sr-only\">clear formatting</span>\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n  ","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass ImageDataService {\r\n  getAll() {\r\n    return http.get(\"/images\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/images/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/images\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/images/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/images/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  findByLocation(id) {\r\n    return http.get(`/images/location/${id}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new ImageDataService();","import React, { Component } from \"react\";\r\nimport ImageDataService from \"../services/image.service\";\r\nimport axios from 'axios';\r\n\r\nexport default class ImageLibrary extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  \tthis.onRemove = this.onRemove.bind(this);\r\n  \tthis.onUpdate = this.onUpdate.bind(this);\r\n  \tthis.onUpload = this.onUpload.bind(this);\r\n  \tthis.onChangeCaption = this.onChangeCaption.bind(this);\r\n  \tthis.onChangeCopyright = this.onChangeCopyright.bind(this);\r\n  \tthis.onChangeNewCaption = this.onChangeNewCaption.bind(this);\r\n  \tthis.onChangeNewCopyright = this.onChangeNewCopyright.bind(this);\r\n  \tthis.onChangeFile = this.onChangeFile.bind(this);\r\n  \tthis.getImages = this.getImages.bind(this);\r\n  \tthis.state = {\r\n  \t\timages : [],\r\n  \t\tnewImage : {\r\n  \t\t\tcopyright : '',\r\n  \t\t\tcaption : '',\r\n  \t\t\tfile : null\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n  componentDidMount() {\r\n  \tthis.getImages(this.props.location);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  \tif(this.props.location !== prevProps.location) {\r\n  \t\tthis.getImages(this.props.location);\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  getImages(location, cb) {\r\n\r\n  \tif (location) {\r\n  \t\tImageDataService.findByLocation(location)\r\n  \t\t  .then(response => {\r\n\t        this.setState({\r\n\t          images: response.data\r\n\t        });\r\n\t        \r\n\t        console.log(response.data);\r\n          typeof cb === 'function' && cb();\r\n\t      })\r\n\t      .catch(e => {\r\n\t        console.log(e);\r\n\t      });\r\n\r\n  \t}\r\n  }\r\n\r\n  onChangeNewCopyright(e) {\r\n  \tthis.setState(prevState => ({\r\n       newImage: {\r\n        ...prevState.newImage,\r\n        copyright: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeNewCaption(e) {\r\n  \tthis.setState(prevState => ({\r\n       newImage: {\r\n        ...prevState.newImage,\r\n        caption: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeFile(e) {\r\n  \tthis.setState(prevState => ({\r\n       newImage: {\r\n        ...prevState.newImage,\r\n        file: e.target.files[0]\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeCaption(id, e) {\r\n  \t\r\n\tconst newImages = this.state.images.map((image) => {\r\n      if (image.id === id) {\r\n        const updatedImage = {\r\n          ...image,\r\n          caption: e.target.value,\r\n        };\r\n \r\n        return updatedImage;\r\n      }\r\n \r\n      return image;\r\n    });\r\n\tthis.setState({\r\n\t\timages : newImages\r\n\t});\r\n  }\r\n\r\n  onChangeCopyright(id,e) {\r\n\r\n  \tconst newImages = this.state.images.map((image) => {\r\n      if (image.id === id) {\r\n        const updatedImage = {\r\n          ...image,\r\n          copyright: e.target.value,\r\n        };\r\n \r\n        return updatedImage;\r\n      }\r\n \r\n      return image;\r\n    });\r\n\tthis.setState({\r\n\t\timages : newImages\r\n\t});\r\n\r\n  }\r\n\r\n  onUpload() {\r\n\r\n  \t// check if file available\r\n\r\n  \tif (this.state.newImage.file === null) {\r\n  \t\talert('Please select a file to upload.');\r\n  \t\treturn;\r\n  \t}\r\n\r\n  \tconst formData = new FormData();\r\n  \tformData.append('caption' , this.state.newImage.caption);\r\n  \tformData.append('copyright' , this.state.newImage.copyright);\r\n  \tformData.append('locationId' , this.props.location);\r\n  \tformData.append('file' , this.state.newImage.file);\r\n  \tformData.append('name' , this.state.newImage.file.name);\r\n\r\n\r\n  \tImageDataService.create(formData)\r\n      .then(response => {\r\n        this.setState({\r\n          newImage : {\r\n  \t\t\tcopyright : '',\r\n  \t\t\tcaption : '',\r\n  \t\t\tfile:null\r\n  \t\t  }\r\n        });\r\n        document.getElementById(\"new-image-file\").value = \"\";\r\n        this.getImages(this.props.location);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n\r\n  onRemove(id) {\r\n  \tif (window.confirm(\"Are you sure you want to delete this image?\")) {\r\n  \t\tImageDataService.delete(id)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getImages(this.props.location);\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n\t  \t});\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  onUpdate(id) {\r\n  \tvar image = this.state.images.find(image => {\r\n  \t  return image.id === id\r\n  \t});\r\n  \t\r\n  \tImageDataService.update(id, image)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getImages(this.props.location, () => {\r\n            const newImages = this.state.images.map((image) => {\r\n                if (image.id === id) {\r\n                  const updatedImage = {\r\n                    ...image,\r\n                    status:\"Updated successfully\",\r\n                  };\r\n           \r\n                  return updatedImage;\r\n                }\r\n           \r\n                return image;\r\n              });\r\n            this.setState({\r\n              images : newImages\r\n            });\r\n        });\r\n        \r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n        const newImages = this.state.images.map((image) => {\r\n                if (image.id === id) {\r\n                  const updatedImage = {\r\n                    ...image,\r\n                    status:\"Unable to update image.\",\r\n                  };\r\n           \r\n                  return updatedImage;\r\n                }\r\n           \r\n                return image;\r\n              });\r\n            this.setState({\r\n              images : newImages\r\n            });\r\n\t  \t});\r\n\r\n  }\r\n\r\n  render () {\r\n  \treturn (\r\n\t    <div className=\"location-library\">\r\n      <h2>Images</h2>\r\n\t\t    <ul>\r\n\t\t      {this.state.images && this.state.images.length > 0 && this.state.images.map(image => (\r\n\t\t        <li key={image.id}>\r\n            <div className=\"card\">\r\n            <div className=\"card-body\">\r\n\r\n             {(this.props.lead_image == image.id) && (\r\n                <span className=\"lead-image\">Lead image</span>\r\n              )}\r\n\t\t        \t\r\n              <img \r\n              src={image.url} \r\n              style={{\r\n                \"maxHeight\":\"200px\",\r\n                \"maxWidth\":\"200px\",\r\n                \"display\":\"block\"\r\n              }}/>\r\n\r\n             \r\n\t\t        \t<label htmlFor={\"caption-\" + image.id}>Caption</label>\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                  className=\"form-control\"\r\n\t\t                  id={\"caption-\" + image.id}\r\n\t\t                  value={image.caption}\r\n\t\t                  onChange={(e) => this.onChangeCaption(image.id,e)}\r\n\t\t                  />\r\n\t\t                  <label htmlFor={\"copyright-\" + image.id}>Copyright</label>\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                  className=\"form-control\"\r\n\t\t                  id={\"copyright-\" + image.id}\r\n\t\t                  value={image.copyright}\r\n\t\t                  onChange={(e) => this.onChangeCopyright(image.id,e)}\r\n\t\t                  />\r\n\t\t          \r\n              </div>\r\n              <div className=\"card-footer\">\r\n\t\t          <button \r\n              type=\"button\" \r\n              onClick={() => this.onUpdate(image.id)}\r\n              className=\"btn btn-success\"\r\n              >\r\n                Update\r\n              </button>\r\n              <button \r\n              type=\"button\" \r\n              onClick={() => this.onRemove(image.id)}\r\n              className=\"btn btn-danger\"\r\n              >\r\n                Remove\r\n              </button>\r\n\t\t          {(this.props.lead_image !== image.id) && (\r\n\t\t          <button \r\n              type=\"button\" \r\n              onClick={() => this.props.onSetLeadImage(image.id)}\r\n              className=\"btn btn-primary\"\r\n              >\r\n\t\t            Set as lead image\r\n\t\t          </button>\r\n\t\t          )}\r\n              <div className=\"status\">\r\n                {image.status}\r\n              </div>\r\n              </div>\r\n              </div>\r\n\t\t        </li>\r\n\t\t      ))}\r\n\t\t    </ul>\r\n\t\t    <div className=\"card\">\r\n\t\t    \r\n        <div className=\"card-body\">\r\n          <h4 className=\"card-title\">Add new image</h4>\r\n  \t\t    <label htmlFor=\"new-image-file\">Image</label>\r\n  \t\t    <input \r\n  \t\t    type=\"file\" \r\n  \t\t    className=\"form-control\"\r\n  \t\t    id=\"new-image-file\" \r\n  \t\t    onChange={this.onChangeFile}\r\n  \t\t     />\r\n  \t\t    <label htmlFor=\"new-caption\">Caption</label>\r\n  \t\t    \t\r\n  \t\t    \t<input\r\n  \t\t\t    \ttype=\"text\"\r\n  \t                  className=\"form-control\"\r\n  \t                  id=\"new-caption\"\r\n  \t                  value={this.state.newImage.caption}\r\n  \t                  onChange={this.onChangeNewCaption}\r\n  \t                  />\r\n\r\n  \t                  <label htmlFor=\"new-copyright\">Copyright</label>\r\n  \t\t    \t<input\r\n  \t\t    \ttype=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"new-copyright\"\r\n                    value={this.state.newImage.copyright}\r\n                    onChange={this.onChangeNewCopyright}\r\n                    />\r\n\r\n                    <button\r\n                    \ttype=\"button\"\r\n                    \tvalue=\"Upload\"\r\n                    \tonClick={this.onUpload}\r\n                      className=\"btn btn-primary\"\r\n                    \t>Upload</button>\r\n                </div>\r\n                  \r\n\t\t    </div>\r\n\t    </div>\r\n\t  )\r\n  }\r\n  \r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass ResidentDataService {\r\n  getAll() {\r\n    return http.get(\"/residents\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/residents/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/residents\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/residents/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/residents/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  findByLocation(id) {\r\n    return http.get(`/residents/location/${id}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new ResidentDataService();","import React, { Component } from \"react\";\r\nimport ResidentDataService from \"../services/resident.service\";\r\nimport axios from 'axios';\r\n\r\n\r\nexport default class ImageLibrary extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  \tthis.getResidents = this.getResidents.bind(this);\r\n  \tthis.onChangeName = this.onChangeName.bind(this);\r\n  \tthis.onChangeStory = this.onChangeStory.bind(this);\r\n  \tthis.onRemove = this.onRemove.bind(this);\r\n  \tthis.onUpdate = this.onUpdate.bind(this);\r\n  \tthis.onChangeNewName = this.onChangeNewName.bind(this);\r\n  \tthis.onChangeNewStory = this.onChangeNewStory.bind(this);\r\n  \tthis.onUpload = this.onUpload.bind(this);\r\n  \tthis.state = {\r\n  \t\tresidents : [],\r\n  \t\tnewResident : {\r\n  \t\t\tname : '',\r\n  \t\t\tstory : ''\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n  componentDidMount() {\r\n  \tthis.getResidents(this.props.location);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  \tif(this.props.location !== prevProps.location) {\r\n  \t\tthis.getResidents(this.props.location);\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  getResidents(location, cb) {\r\n  \tif (location) {\r\n  \t\tResidentDataService.findByLocation(location)\r\n  \t\t  .then(response => {\r\n\t        this.setState({\r\n\t          residents: response.data\r\n\t        });\r\n\t        \r\n\t        console.log(response.data);\r\n          typeof cb === 'function' && cb();\r\n\t      })\r\n\t      .catch(e => {\r\n\t        console.log(e);\r\n\t      });\r\n\r\n  \t}\r\n  }\r\n\r\n  onChangeName(id, e) {\r\n  \t\r\n\tconst newResidents = this.state.residents.map((resident) => {\r\n      if (resident.id === id) {\r\n        const updatedResident = {\r\n          ...resident,\r\n          name: e.target.value,\r\n        };\r\n \r\n        return updatedResident;\r\n      }\r\n \r\n      return resident;\r\n    });\r\n\tthis.setState({\r\n\t\tresidents : newResidents\r\n\t});\r\n  }\r\n\r\n  onChangeStory(id, e) {\r\n  \t\r\n\tconst newResidents = this.state.residents.map((resident) => {\r\n      if (resident.id === id) {\r\n        const updatedResident = {\r\n          ...resident,\r\n          story: e.target.value,\r\n        };\r\n \r\n        return updatedResident;\r\n      }\r\n \r\n      return resident;\r\n    });\r\n\tthis.setState({\r\n\t\tresidents : newResidents\r\n\t});\r\n  }\r\n\r\n  onRemove(id) {\r\n  \tif (window.confirm(\"Are you sure you want to delete this story?\")) {\r\n  \t\tResidentDataService.delete(id)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getResidents(this.props.location);\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n\t  \t});\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  onUpdate(id) {\r\n  \tconst resident = this.state.residents.find(resident => {\r\n\t  return resident.id === id\r\n\t});\r\n  \t\r\n  \tResidentDataService.update(id, resident)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getResidents(this.props.location, () => {\r\n            const newResidents = this.state.residents.map((resident) => {\r\n                if (resident.id === id) {\r\n                  const updatedResident = {\r\n                    ...resident,\r\n                    status:\"Updated successfully\",\r\n                  };\r\n           \r\n                  return updatedResident;\r\n                }\r\n           \r\n                return resident;\r\n              });\r\n            this.setState({\r\n              residents : newResidents\r\n            });\r\n        });\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n        const newResidents = this.state.residents.map((resident) => {\r\n            if (resident.id === id) {\r\n              const updatedResident = {\r\n                ...resident,\r\n                status:\"Update unsuccessful\",\r\n              };\r\n       \r\n              return updatedResident;\r\n            }\r\n       \r\n            return resident;\r\n          });\r\n        this.setState({\r\n          residents : newResidents\r\n        });\r\n\t  \t});\r\n\r\n  }\r\n\r\n  onChangeNewName(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResident: {\r\n        ...prevState.newResident,\r\n        name: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeNewStory(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResident: {\r\n        ...prevState.newResident,\r\n        story: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n\r\n  onUpload() {\r\n\r\n  \tvar data = {\r\n  \t\t'name' : this.state.newResident.name,\r\n  \t\t'story' : this.state.newResident.story,\r\n  \t\t'locationId' : this.props.location\r\n  \t};\r\n\r\n  \tResidentDataService.create(data)\r\n      .then(response => {\r\n        this.setState({\r\n          newResident : {\r\n  \t\t\tname : '',\r\n  \t\t\tstory : ''\r\n  \t\t  }\r\n        });\r\n        this.getResidents(this.props.location);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n\r\n\r\n  render () {\r\n  \treturn (\r\n  \t\t<div className=\"location-library\">\r\n      <h2>Resident Stories</h2>\r\n  \t\t<ul>\r\n\t\t      {this.state.residents && this.state.residents.length > 0 && this.state.residents.map(resident => (\r\n\t\t      \t<li  key={resident.id}>\r\n            <div className=\"card\">\r\n            <div className=\"card-body\">\r\n\t\t\t      \t<label htmlFor={\"name-\" + resident.id}>Name</label>\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                className=\"form-control\"\r\n\t\t                id={\"name-\" + resident.id}\r\n\t\t                value={resident.name}\r\n\t\t                onChange={(e) => this.onChangeName(resident.id,e)}\r\n\t\t                />\r\n\t\t            <label htmlFor={\"story-\" + resident.id}>Story</label>\r\n\t\t\t    \t<textarea\r\n\t\t\t    \t\t\r\n\t\t                className=\"form-control paragraphs\"\r\n\t\t                id={\"story-\" + resident.id}\r\n\t\t                value={resident.story}\r\n\t\t                onChange={(e) => this.onChangeStory(resident.id,e)}\r\n\t\t                />\r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n\r\n\t\t            <button \r\n              type=\"button\" \r\n              onClick={() => this.onUpdate(resident.id)}\r\n              className=\"btn btn-success\"\r\n              >\r\n                Update\r\n              </button>\r\n              <button \r\n              type=\"button\" \r\n              onClick={() => this.onRemove(resident.id)}\r\n              className=\"btn btn-danger\"\r\n              >\r\n                Remove\r\n              </button>\r\n              <div className=\"status\">\r\n                {resident.status}\r\n              </div>\r\n              </div>\r\n              </div>\r\n\t\t      \t</li>\r\n\t\t      ))}\r\n\t\t    </ul>\r\n\t\t    <div className=\"card\">\r\n\t\t\t    \r\n          <div className=\"card-body\">\r\n          <h4 className=\"card-title\">Add new resident story</h4>\r\n\t\t\t    <label htmlFor=\"new-name\">Name</label>\r\n\t\t\t    \t\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                  className=\"form-control\"\r\n\t\t                  id=\"new-name\"\r\n\t\t                  value={this.state.newResident.name}\r\n\t\t                  onChange={this.onChangeNewName}\r\n\t\t                  />\r\n\r\n\t\t                  <label htmlFor=\"new-story\">Story</label>\r\n\t\t\t    \t<textarea\r\n\t                  className=\"form-control paragraphs\"\r\n\t                  id=\"new-story\"\r\n\t                  value={this.state.newResident.story}\r\n\t                  onChange={this.onChangeNewStory}\r\n\t                  />\r\n\r\n\t                  <button\r\n\t                  \ttype=\"button\"\r\n\t                  \tvalue=\"Upload\"\r\n\t                  \tonClick={this.onUpload}\r\n                      className=\"btn btn-primary\"\r\n\t                  \t>Upload</button>\r\n\r\n            </div>\r\n\t\t    </div>\r\n  \t\t</div>\r\n\t)\r\n  }\r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass ResourceDataService {\r\n  getAll() {\r\n    return http.get(\"/resources\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/resources/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/resources\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/resources/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/resources/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  findByLocation(id) {\r\n    return http.get(`/resources/location/${id}`, { headers: authHeader() });\r\n  }\r\n}\r\n\r\nexport default new ResourceDataService();","import React, { Component } from \"react\";\r\nimport Toggle from \"react-toggle\";\r\nimport \"react-toggle/style.css\";\r\nimport ResourceDataService from \"../services/resource.service\";\r\nimport axios from 'axios';\r\n\r\nexport default class ResourceLibrary extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  \tthis.onRemove = this.onRemove.bind(this);\r\n  \tthis.onUpdate = this.onUpdate.bind(this);\r\n  \tthis.onUpload = this.onUpload.bind(this);\r\n  \tthis.onChangeName = this.onChangeName.bind(this);\r\n  \tthis.onChangeDescription = this.onChangeDescription.bind(this);\r\n  \tthis.onChangeNewName = this.onChangeNewName.bind(this);\r\n  \tthis.onChangeURL = this.onChangeURL.bind(this);\r\n  \tthis.onChangeNewDescription = this.onChangeNewDescription.bind(this);\r\n  \tthis.onChangeFile = this.onChangeFile.bind(this);\r\n  \tthis.onToggleIsFile = this.onToggleIsFile.bind(this);\r\n  \tthis.getResources = this.getResources.bind(this);\r\n  \tthis.state = {\r\n  \t\tresources : [],\r\n  \t\tnewResource : {\r\n  \t\t\tname : '',\r\n  \t\t\tdescription : '',\r\n  \t\t\tfile : null,\r\n  \t\t\turl : '',\r\n  \t\t\tisFile : true\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n  componentDidMount() {\r\n  \tthis.getResources(this.props.location);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  \tif(this.props.location !== prevProps.location) {\r\n  \t\tthis.getResources(this.props.location);\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  getResources(location, cb) {\r\n\r\n  \tif (location) {\r\n  \t\tResourceDataService.findByLocation(location)\r\n  \t\t  .then(response => {\r\n\t        this.setState({\r\n\t          resources: response.data\r\n\t        });\r\n\t        \r\n\t        console.log(response.data);\r\n          typeof cb === 'function' && cb();\r\n\t      })\r\n\t      .catch(e => {\r\n\t        console.log(e);\r\n\t      });\r\n\r\n  \t}\r\n  }\r\n\r\n\r\n  onToggleIsFile(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResource: {\r\n        ...prevState.newResource,\r\n        isFile: e.target.checked,\r\n        url : '',\r\n        file : null\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeURL(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResource: {\r\n        ...prevState.newResource,\r\n        url: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeNewName(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResource: {\r\n        ...prevState.newResource,\r\n        name: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeNewDescription(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResource: {\r\n        ...prevState.newResource,\r\n        description: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeFile(e) {\r\n  \tthis.setState(prevState => ({\r\n       newResource: {\r\n        ...prevState.newResource,\r\n        file: e.target.files[0]\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeName(id, e) {\r\n  \t\r\n\tconst newResources = this.state.resources.map((resource) => {\r\n      if (resource.id === id) {\r\n        const updatedResource = {\r\n          ...resource,\r\n          name: e.target.value,\r\n        };\r\n \r\n        return updatedResource;\r\n      }\r\n \r\n      return resource;\r\n    });\r\n\tthis.setState({\r\n\t\tresources : newResources\r\n\t});\r\n  }\r\n\r\n  onChangeDescription(id,e) {\r\n\r\n  \tconst newResources = this.state.resources.map((resource) => {\r\n      if (resource.id === id) {\r\n        const updatedResource = {\r\n          ...resource,\r\n          description: e.target.value,\r\n        };\r\n \r\n        return updatedResource;\r\n      }\r\n \r\n      return resource;\r\n    });\r\n\tthis.setState({\r\n\t\tresources : newResources\r\n\t});\r\n\r\n  }\r\n\r\n  onUpload() {\r\n\r\n\r\n  \tconst formData = new FormData();\r\n  \tformData.append('name' , this.state.newResource.name);\r\n  \tformData.append('description' , this.state.newResource.description);\r\n  \tformData.append('url' , this.state.newResource.url);\r\n  \tformData.append('locationId' , this.props.location);\r\n  \tformData.append('file' , this.state.newResource.file);\r\n\r\n\r\n  \tResourceDataService.create(formData)\r\n      .then(response => {\r\n        this.setState({\r\n          newResource : {\r\n  \t\t\tname : '',\r\n  \t\t\tdescription : '',\r\n  \t\t\turl : '',\r\n  \t\t\tfile:null,\r\n  \t\t\tisFile:true\r\n  \t\t  }\r\n        });\r\n        document.getElementById(\"new-resource-file\").value = \"\";\r\n        this.getResources(this.props.location);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n\r\n  onRemove(id) {\r\n  \tif (window.confirm(\"Are you sure you want to delete this resource?\")) {\r\n  \t\tResourceDataService.delete(id)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getResources(this.props.location);\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n\t  \t});\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  onUpdate(id) {\r\n  \tconst resource = this.state.resources.find(resource => {\r\n\t  return resource.id === id\r\n\t});\r\n  \t\r\n  \tResourceDataService.update(id, resource)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getResources(this.props.location, () => {\r\n          const newResources = this.state.resources.map((resource) => {\r\n                if (resource.id === id) {\r\n                  const updatedResource = {\r\n                    ...resource,\r\n                    status:\"Updated successfully\",\r\n                  };\r\n           \r\n                  return updatedResource;\r\n                }\r\n           \r\n                return resource;\r\n              });\r\n            this.setState({\r\n              resources : newResources\r\n            });\r\n        });\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n        const newResources = this.state.resources.map((resource) => {\r\n                if (resource.id === id) {\r\n                  const updatedResource = {\r\n                    ...resource,\r\n                    status:\"Update unsuccessful\",\r\n                  };\r\n           \r\n                  return updatedResource;\r\n                }\r\n           \r\n                return resource;\r\n              });\r\n            this.setState({\r\n              resources : newResources\r\n            });\r\n\t  \t});\r\n\r\n  }\r\n\r\n  render () {\r\n  \treturn (\r\n\t    <div className=\"location-library\">\r\n      <h2>Resources</h2>\r\n\t\t    <ul>\r\n\t\t      {this.state.resources && this.state.resources.length > 0 && this.state.resources.map(resource => (\r\n\t\t        <li key={resource.id}>\r\n            <div className=\"card\">\r\n            <div className=\"card-body\">\r\n\t\t        \t<p><a \r\n              href={resource.url} \r\n              target=\"_blank\">\r\n              {resource.url}\r\n              </a></p>\r\n\t\t        \t<label htmlFor={\"name-\" + resource.id}>Name</label>\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                  className=\"form-control\"\r\n\t\t                  id={\"name-\" + resource.id}\r\n\t\t                  value={resource.name}\r\n\t\t                  onChange={(e) => this.onChangeName(resource.id,e)}\r\n\t\t                  />\r\n\t\t                  <label htmlFor={\"description-\" + resource.id}>Description</label>\r\n\t\t\t    \t<textarea\r\n\t\t                  className=\"form-control paragraphs\"\r\n\t\t                  id={\"description-\" + resource.id}\r\n\t\t                  value={resource.description}\r\n\t\t                  onChange={(e) => this.onChangeDescription(resource.id,e)}\r\n\t\t                  />\r\n\t\t          \r\n              </div>\r\n              <div className=\"card-footer\">\r\n              <button \r\n              type=\"button\" \r\n              onClick={() => this.onUpdate(resource.id)}\r\n              className=\"btn btn-success\"\r\n              >\r\n                Update\r\n              </button>\r\n\t\t          <button \r\n              type=\"button\" \r\n              onClick={() => this.onRemove(resource.id)}\r\n              className=\"btn btn-danger\"\r\n              >\r\n\t\t            Remove\r\n\t\t          </button>\r\n              <div className=\"status\">\r\n                {resource.status}\r\n              </div>\r\n              </div>\r\n              </div>\r\n\t\t          \r\n\t\t        </li>\r\n\t\t      ))}\r\n\t\t    </ul>\r\n\t\t    <div className=\"card\">\r\n\t\t    \r\n        <div className=\"card-body\">\r\n        <h4 className=\"card-title\">Add new resource</h4>\r\n        <span\r\n        className={this.state.newResource.isFile ? 'file-toggle-label' : 'file-toggle-label file-toggle-label-active'}\r\n        >URL</span>\r\n\t\t    <Toggle\r\n\t\t\t  id='is-file'\r\n\t\t\t  checked={this.state.newResource.isFile}\r\n\t\t\t  onChange={this.onToggleIsFile} />\r\n        <span\r\n        className={this.state.newResource.isFile ? ' file-toggle-label file-toggle-label-active' : 'file-toggle-label'}\r\n        >File</span>\r\n\t\t\t<label htmlFor='is-file' className=\"sr-only\">File or URL</label>\r\n\r\n\t\t\t{(this.state.newResource.isFile) && (\r\n\r\n\t\t\t\t<div className=\"form-group\">\r\n\r\n\t\t    <label htmlFor=\"new-resource-file\">File</label>\r\n\t\t    <input \r\n\t\t    type=\"file\" \r\n\t\t    className=\"form-control\"\r\n\t\t    id=\"new-resource-file\" \r\n\t\t    onChange={this.onChangeFile}\r\n\t\t     />\r\n\t\t     </div>\r\n\t\t     )} \r\n\r\n\t\t\t{(!this.state.newResource.isFile) && (\r\n\t\t\t\t<div className=\"form-group\">\r\n\r\n\t\t     <label htmlFor=\"new-url\">URL</label>\r\n\t\t    <input \r\n\t\t    type=\"url\" \r\n\t\t    className=\"form-control\"\r\n\t\t    id=\"new-url\" \r\n\t\t    onChange={this.onChangeURL}\r\n\t\t     />\r\n\t\t     </div>\r\n\t\t      )}  \r\n\r\n\t\t    <label htmlFor=\"new-name\">Name</label>\r\n\t\t    \t\r\n\t\t    \t<input\r\n\t\t\t    \ttype=\"text\"\r\n\t                  className=\"form-control\"\r\n\t                  id=\"new-name\"\r\n\t                  value={this.state.newResource.name}\r\n\t                  onChange={this.onChangeNewName}\r\n\t                  />\r\n\r\n\t                  <label htmlFor=\"new-copyright\">Description</label>\r\n\t\t    \t<textarea\r\n                  className=\"form-control paragraphs\"\r\n                  id=\"new-description\"\r\n                  value={this.state.newResource.description}\r\n                  onChange={this.onChangeNewDescription}\r\n                  />\r\n\r\n                  <button\r\n                  \ttype=\"button\"\r\n                  \tvalue=\"Upload\"\r\n                  \tonClick={this.onUpload}\r\n                    className=\"btn btn-primary\"\r\n                  \t>Upload</button>\r\n\r\n            </div>\r\n                  \r\n\t\t    </div>\r\n\t    </div>\r\n\t  )\r\n  }\r\n  \r\n}","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport UserDataService from \"../services/user.service\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport CategoryDataService from \"../services/category.service\";\r\nimport TiptapSimple from '../components/tiptap-simple.component';\r\nimport ImageLibrary from '../components/image-library.component';\r\nimport ResidentLibrary from '../components/resident-library.component';\r\nimport ResourceLibrary from '../components/resource-library.component';\r\n\r\n\r\nexport default class Location extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeTitle = this.onChangeTitle.bind(this);\r\n    this.onChangeSlug = this.onChangeSlug.bind(this);\r\n    this.onChangeDescription = this.onChangeDescription.bind(this);\r\n    this.onChangeIntroduction = this.onChangeIntroduction.bind(this);\r\n    this.onChangeHistory = this.onChangeHistory.bind(this);\r\n    this.onChangeYoutube = this.onChangeYoutube.bind(this);\r\n    this.onChangeCallToActionText = this.onChangeCallToActionText.bind(this);\r\n    this.onChangeCallToActionLink = this.onChangeCallToActionLink.bind(this);\r\n    this.onChangeCallToActionButton = this.onChangeCallToActionButton.bind(this);\r\n    this.onChangeAuthorId = this.onChangeAuthorId.bind(this);\r\n    this.onChangeCategoryId = this.onChangeCategoryId.bind(this);\r\n    this.getLocation = this.getLocation.bind(this);\r\n    this.onChangeLatitude = this.onChangeLatitude.bind(this);\r\n    this.onChangeLongitude = this.onChangeLongitude.bind(this);\r\n    this.onSetLeadImage = this.onSetLeadImage.bind(this);\r\n    this.getAuthor = this.getAuthor.bind(this);\r\n    this.getAllAuthors = this.getAllAuthors.bind(this);\r\n    this.getAllCategories = this.getAllCategories.bind(this);\r\n    this.updatePublished = this.updatePublished.bind(this);\r\n    this.updateLocation = this.updateLocation.bind(this);\r\n    this.deleteLocation = this.deleteLocation.bind(this);\r\n\r\n    this.state = {\r\n      currentLocation: {\r\n        id: null,\r\n        title: \"\",\r\n        slug:\"\",\r\n        description: \"\",\r\n        published: false,\r\n        authorId:null,\r\n        latitude:null,\r\n        longitude:null,\r\n        introduction:\"\",\r\n        history:\"\",\r\n        lead_image:null,\r\n        categoryId : null,\r\n        call_to_action_text : '',\r\n        call_to_action_link : '',\r\n        call_to_action_button : ''\r\n\r\n      },\r\n      message: \"\",\r\n      messageClass:'',\r\n      loggedInUser: null,\r\n      isLoggedIn:false,\r\n      isMod: false,\r\n      isAdmin: false,\r\n      allAuthors:[],\r\n      allCategories:[]\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n    this.getLocation(this.props.match.params.id);\r\n    this.getAllCategories();\r\n  }\r\n\r\n  onChangeTitle(e) {\r\n    const title = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentLocation: {\r\n          ...prevState.currentLocation,\r\n          title: title\r\n        }\r\n      };\r\n    });\r\n  }\r\n  onChangeSlug(e) {\r\n    const slug = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentLocation: {\r\n          ...prevState.currentLocation,\r\n          slug: slug\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeDescription(e) {\r\n    const description = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        description: description\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeIntroduction(e) {\r\n    const introduction = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        introduction: introduction\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeYoutube(e) {\r\n    const youtube_id = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        youtube_id: youtube_id\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeCallToActionText(e) {\r\n    const call_to_action_text = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        call_to_action_text: call_to_action_text\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeCallToActionLink(e) {\r\n    const call_to_action_link = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        call_to_action_link: call_to_action_link\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeCallToActionButton(e) {\r\n    const call_to_action_button = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        call_to_action_button: call_to_action_button\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeHistory(history) {\r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        history: history\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeAuthorId(e) {\r\n    const authorId = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        authorId: authorId\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeCategoryId(e) {\r\n    const categoryId = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        categoryId: categoryId\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeLatitude(e) {\r\n    const latitude = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        latitude: latitude\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeLongitude(e) {\r\n    const longitude = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentLocation: {\r\n        ...prevState.currentLocation,\r\n        longitude: longitude\r\n      }\r\n    }));\r\n  }\r\n\r\n  onSetLeadImage(id) {\r\n    console.log(\"lead iamge\");\r\n    console.log(id);\r\n    const state = this.state;\r\n    this.setState(state => ({\r\n      currentLocation: {\r\n        ...state.currentLocation,\r\n        lead_image: id\r\n      }\r\n    }), this.updateLocation);\r\n    \r\n    \r\n  }\r\n\r\n  getLocation(id) {\r\n    LocationDataService.get(id)\r\n      .then(response => {\r\n        \r\n        \r\n        this.setState({    \r\n          currentLocation: response.data\r\n        });\r\n        if (this.state.isAdmin) {\r\n          this.getAuthor(response.data.authorId);\r\n          this.getAllAuthors();\r\n        }\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getAuthor(id) {\r\n    UserDataService.get(id)\r\n      .then(response => {\r\n        this.setState({\r\n\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getAllAuthors() {\r\n    UserDataService.getAll()\r\n      .then(response => {\r\n        this.setState({\r\n          allAuthors:response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getAllCategories() {\r\n    CategoryDataService.getAll()\r\n      .then(response => {\r\n        this.setState({\r\n          allCategories:response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  updatePublished(status) {\r\n    var data = this.prepareDataForUpdate(status);\r\n\r\n    LocationDataService.update(this.state.currentLocation.id, data)\r\n      .then(response => {\r\n        this.setState(prevState => ({\r\n          currentLocation: {\r\n            ...prevState.currentLocation,\r\n            published: status\r\n          },\r\n          message : response.data.message,\r\n          messageClass : 'success'\r\n        }));\r\n        this.getLocation(this.state.currentLocation.id);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n        this.setState({\r\n          message: e,\r\n          messageClass:'danger'\r\n        });\r\n        this.getLocation(this.state.currentLocation.id);\r\n      });\r\n  }\r\n\r\n  updateLocation() {\r\n\r\n\r\n    var data = this.prepareDataForUpdate(this.state.currentLocation.published);\r\n\r\n    \r\n\r\n    LocationDataService.update(\r\n      this.state.currentLocation.id,\r\n      data\r\n    )\r\n      .then(response => {\r\n        this.setState({\r\n          message: response.data.message,\r\n          messageClass:'success'\r\n        });\r\n        this.getLocation(this.state.currentLocation.id);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n        this.setState({\r\n          message: e,\r\n          messageClass:'danger'\r\n        });\r\n        this.getLocation(this.state.currentLocation.id);\r\n      });\r\n  }\r\n\r\n  prepareDataForUpdate(status) {\r\n\r\n    this.setState({\r\n      message: '',\r\n      messageClass : 'loading'\r\n    });\r\n\r\n    \r\n    var data = {\r\n      id: this.state.currentLocation.id,\r\n      title: this.state.currentLocation.title,\r\n      description: this.state.currentLocation.description,\r\n      introduction: this.state.currentLocation.introduction,\r\n      history : this.state.currentLocation.history == null ? '' : this.state.currentLocation.history,\r\n      slug:this.state.currentLocation.slug,\r\n      lead_image:this.state.currentLocation.lead_image,\r\n      published: status,\r\n      authorId:this.state.currentLocation.authorId,\r\n      loggedInUser:this.state.loggedInUser,\r\n      longitude:this.state.currentLocation.longitude,\r\n      latitude:this.state.currentLocation.latitude,\r\n      youtube_id:this.state.currentLocation.youtube_id,\r\n      categoryId:this.state.currentLocation.categoryId,\r\n      call_to_action_text : this.state.currentLocation.call_to_action_text,\r\n      call_to_action_link : this.state.currentLocation.call_to_action_link,\r\n      call_to_action_button : this.state.currentLocation.call_to_action_button\r\n    };\r\n    return data;\r\n  }\r\n\r\n  deleteLocation() {  \r\n    if (window.confirm(\"Are you sure you want to delete this location?\")) {\r\n      LocationDataService.delete(this.state.currentLocation.id)\r\n        .then(response => {\r\n          console.log(response.data);\r\n          this.props.history.push('/locations')\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    }  \r\n    \r\n  }\r\n\r\n  render() {\r\n    const { currentLocation } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        {currentLocation ? (\r\n          <div className=\"edit-form edit-location\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              <h1>Edit Location</h1>\r\n\r\n                {(currentLocation.slug) && ( \r\n              <p>View location: <a target=\"_blank\" href={process.env.REACT_APP_DOMAIN + \"/locations/\" + currentLocation.slug}>\r\n                {process.env.REACT_APP_DOMAIN + \"/locations/\" + currentLocation.slug}\r\n                </a>\r\n                </p>\r\n                )}\r\n            </div>\r\n            <div className=\"col-sm-4 order-sm-2\">\r\n\r\n            <div className=\"location-controls\">\r\n\r\n              <div className=\"form-group\">\r\n                <label>\r\n                  <strong>Status:</strong>\r\n                </label>\r\n                {currentLocation.published ? \"Published\" : \"Pending\"}\r\n              </div>\r\n              \r\n              {(this.state.loggedInUser == currentLocation.authorId || this.state.isMod || this.state.isAdmin) && (\r\n                  <button\r\n                    className=\"btn btn-primary mr-2\"\r\n                    onClick={() => this.updatePublished(!currentLocation.published)}\r\n                  >\r\n                    {currentLocation.published ? (\"Set as draft\") : (\"Publish\") }\r\n                  </button>\r\n                 )} \r\n\r\n                  {(this.state.loggedInUser == currentLocation.authorId || this.state.isMod || this.state.isAdmin) && (\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-success mr-2\"\r\n                    onClick={this.updateLocation}\r\n                  >\r\n                    Update\r\n                  </button>\r\n                  )}\r\n\r\n\r\n\r\n                  {this.state.isAdmin && (\r\n\r\n                      <button\r\n                        className=\"btn btn-danger\"\r\n                        onClick={this.deleteLocation}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    )}\r\n\r\n                  <p className={'alert alert-' + this.state.messageClass}>{this.state.message}</p>\r\n                  {this.state.messageClass=='loading' && (\r\n                    <div className=\"spinner-border text-secondary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  )}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-sm-8 order-sm-1\">\r\n\r\n              <form type=\"\">\r\n              <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"title\">Title</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"title\"\r\n                    value={currentLocation.title}\r\n                    onChange={this.onChangeTitle}\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"title\">URL</label>\r\n                  <p className=\"small\">https://map.savepublichousing.com/locations/</p>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"title\"\r\n                    value={currentLocation.slug}\r\n                    onChange={this.onChangeSlug}\r\n                  />\r\n                </div>\r\n\r\n                {( ( this.state.isAdmin) &&  currentLocation.authorId) && (\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"authorId\">Author</label>\r\n                    <select className=\"form-control\"\r\n                      id=\"authorId\"\r\n                      required\r\n                      value={currentLocation.authorId}\r\n                      onChange={this.onChangeAuthorId}\r\n                      name=\"authorId\">\r\n\r\n                      {\r\n                        this.state.allAuthors &&\r\n                        this.state.allAuthors.length != 0 &&\r\n                        this.state.allAuthors.map((author,index) => (\r\n                          <option value={author.id} key={author.id}>{author.username} ({author.email})</option>\r\n                        ))\r\n                      }\r\n                      \r\n                    </select>\r\n                  </div>\r\n                  ) }\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"categoryId\">Category</label>\r\n                    <select className=\"form-control\"\r\n                      id=\"categoryId\"\r\n                      required\r\n                      value={currentLocation.categoryId || '0'}\r\n                      onChange={this.onChangeCategoryId}\r\n                      name=\"categoryId\">\r\n                      { currentLocation.categoryId === null &&(\r\n                        <option value=\"0\"></option>\r\n                        )}\r\n\r\n                      {\r\n                        this.state.allCategories &&\r\n                        this.state.allCategories.length != 0 &&\r\n                        this.state.allCategories.map((category,index) => (\r\n                          <option value={category.id} key={category.id}>{category.name}</option>\r\n                        ))\r\n                      }\r\n                      \r\n                    </select>\r\n                  </div>\r\n\r\n                <div className=\"row\">\r\n                  <div className=\"col\">\r\n\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"latitude\">Latitude</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        id=\"latitude\"\r\n                        value={currentLocation.latitude || \"\"}\r\n                        onChange={this.onChangeLatitude}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col\">\r\n\r\n                    <div className=\"form-group\">\r\n                      <label htmlFor=\"longitude\">Longitude</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        id=\"longitude\"\r\n                        value={currentLocation.longitude || \"\"}\r\n                        onChange={this.onChangeLongitude}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"description\">Description</label>\r\n                  <p className=\"small\">Describe the location in one sentence. This will be shown on the map pop ups.</p>\r\n                  <textarea\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"description\"\r\n                    value={currentLocation.description}\r\n                    onChange={this.onChangeDescription}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"introduction\">Introduction</label>\r\n                  <p className=\"small\">One paragraph, emotive introduction to the location.</p>\r\n                  <textarea\r\n                    type=\"text\"\r\n                    className=\"form-control paragraphs\"\r\n                    id=\"introduction\"\r\n                    value={currentLocation.introduction || \"\"}\r\n                    onChange={this.onChangeIntroduction}\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"youtube_id\">YouTube ID</label>\r\n                  <p className=\"small\">Enter the ID of the YouTube video. You can find the ID in the url. For example, for https://www.youtube.com/watch?v=Jn09UdSb3aA the ID is Jn09UdSb3aA</p>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"youtube_id\"\r\n                    value={currentLocation.youtube_id || \"\"}\r\n                    onChange={this.onChangeYoutube}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"history\">History</label>\r\n                  <p className=\"small\">A detailed history of the location, and any other relevant information.</p>\r\n                  \r\n                  <TiptapSimple\r\n                    data-lpignore=\"true\"\r\n                    id=\"history\"\r\n                    content={currentLocation.history || \"\"} \r\n                    onChange={this.onChangeHistory} \r\n                    />\r\n\r\n\r\n                  \r\n                </div>\r\n                </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                <div className=\"location-library\">\r\n                \r\n                <h2>Call to action</h2>\r\n                <div className=\"card\">\r\n                  <div className=\"card-body\">\r\n                  \r\n                  \r\n                  <label htmlFor=\"call_to_action_text\">Text</label>\r\n                  <p className=\"small\">A short paragraph explaining the action, e.g. \"Take five minutes to sign our petition.\" or \"Write to the Minister for Housing at email@address.com.\"</p>\r\n                  <textarea\r\n                    \r\n                    className=\"form-control\"\r\n                    id=\"call_to_action_text\"\r\n                    value={currentLocation.call_to_action_text || \"\"}\r\n                    onChange={this.onChangeCallToActionText}\r\n                  />\r\n                  <label htmlFor=\"call_to_action_link\">Link</label>\r\n                  <p className=\"small\">An optional link to another website, e.g. change.org.</p>\r\n                  <input\r\n                    type=\"url\"\r\n                    className=\"form-control\"\r\n                    id=\"call_to_action_link\"\r\n                    value={currentLocation.call_to_action_link || \"\"}\r\n                    onChange={this.onChangeCallToActionLink}\r\n                  />\r\n                  <label htmlFor=\"call_to_action_button\">Button text</label>\r\n                  <p className=\"small\">Optional. Defaults to \"Take action now\".</p>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    id=\"call_to_action_button\"\r\n                    value={currentLocation.call_to_action_button || \"\"}\r\n                    onChange={this.onChangeCallToActionButton}\r\n                  />\r\n                </div>\r\n\r\n                  </div>\r\n                </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  \r\n                  <ImageLibrary \r\n                    id=\"images\"\r\n                    location={currentLocation.id || \"\"} \r\n                    lead_image={currentLocation.lead_image}\r\n                    onSetLeadImage={this.onSetLeadImage} \r\n                    />\r\n                           \r\n\r\n\r\n                  \r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  \r\n                  <ResidentLibrary \r\n                    id=\"residents\"\r\n                    location={currentLocation.id || \"\"}\r\n                    />\r\n   \r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  \r\n                  <ResourceLibrary \r\n                    id=\"resources\"\r\n                    location={currentLocation.id || \"\"}\r\n                    />\r\n   \r\n                </div>\r\n                \r\n                \r\n\r\n                \r\n              </form>\r\n            </div>\r\n            \r\n          </div>\r\n            \r\n            \r\n\r\n            \r\n            \r\n\r\n\r\n            \r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <br />\r\n            <p>No location found with this id</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toggle from 'react-toggle'; \r\nimport \"react-toggle/style.css\";\r\n\r\nexport default class LocationsList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeSearchTitle = this.onChangeSearchTitle.bind(this);\r\n    this.onToggleOwnFilter = this.onToggleOwnFilter.bind(this);\r\n    this.retrieveLocations = this.retrieveLocations.bind(this);\r\n    this.refreshList = this.refreshList.bind(this);\r\n    this.setActiveLocation = this.setActiveLocation.bind(this);\r\n    this.removeAllLocations = this.removeAllLocations.bind(this);\r\n    this.searchTitle = this.searchTitle.bind(this);\r\n\r\n    this.state = {\r\n      locations: [],\r\n      currentLocation: null,\r\n      currentIndex: -1,\r\n      searchTitle: \"\",\r\n      loggedInUser: null,\r\n      isLoggedIn:false,\r\n      isMod: false,\r\n      isAdmin: false,\r\n      hideOtherAuthors:false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n      console.log(loggedInUser);\r\n    }\r\n    this.retrieveLocations();\r\n  }\r\n\r\n  onChangeSearchTitle(e) {\r\n    const searchTitle = e.target.value;\r\n\r\n    this.setState({\r\n      searchTitle: searchTitle\r\n    });\r\n  }\r\n\r\n  onToggleOwnFilter(e) {\r\n    const value = e.target.value;\r\n    this.setState({\r\n      hideOtherAuthors:!this.state.hideOtherAuthors\r\n    });\r\n    this.setState({\r\n      currentLocation: null,\r\n      currentIndex: -1\r\n    });\r\n\r\n    if (!this.state.hideOtherAuthors) {\r\n      LocationDataService.findByAuthor(this.state.loggedInUser)\r\n      .then(response => {\r\n        this.setState({\r\n          locations: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n    } else {\r\n      this.retrieveLocations();\r\n    }\r\n\r\n    \r\n  }\r\n\r\n  retrieveLocations() {\r\n    LocationDataService.getAll()\r\n      .then(response => {\r\n        this.setState({\r\n          locations: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  refreshList() {\r\n    this.retrieveLocations();\r\n    this.setState({\r\n      currentLocation: null,\r\n      currentIndex: -1\r\n    });\r\n  }\r\n\r\n  setActiveLocation(location, index) {\r\n    this.setState({\r\n      currentLocation: location,\r\n      currentIndex: index\r\n    });\r\n  }\r\n\r\n  removeAllLocations() {\r\n    LocationDataService.deleteAll()\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.refreshList();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  searchTitle() {\r\n    this.setState({\r\n      currentLocation: null,\r\n      currentIndex: -1\r\n    });\r\n\r\n    LocationDataService.findByTitle(this.state.searchTitle)\r\n      .then(response => {\r\n        this.setState({\r\n          locations: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const { searchTitle, locations, currentLocation, currentIndex } = this.state;\r\n\r\n    return (\r\n      <div className=\"list row\">\r\n        <div className=\"col-md-8\">\r\n          <div className=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Search by title\"\r\n              value={searchTitle}\r\n              onChange={this.onChangeSearchTitle}\r\n            />\r\n\r\n            <div className=\"input-group-append\">\r\n              <button\r\n                className=\"btn btn-outline-secondary\"\r\n                type=\"button\"\r\n                onClick={this.searchTitle}\r\n              >\r\n                Search\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-8\">\r\n        <label>\r\n            <Toggle\r\n              defaultChecked={this.state.hideOtherAuthors}\r\n              onChange={this.onToggleOwnFilter} />\r\n              <br/>\r\n            <span>Show only my locations</span>\r\n          </label>\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <h4>Locations List</h4>\r\n\r\n          <ul className=\"list-group\">\r\n            {locations &&\r\n              locations.map((location, index) => (\r\n                <li\r\n                  className={\r\n                    \"list-group-item \" +\r\n                    (index === currentIndex ? \"active\" : \"\")\r\n                  }\r\n                  onClick={() => this.setActiveLocation(location, index)}\r\n                  key={index}\r\n                >\r\n                  {location.title}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n\r\n          \r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          {currentLocation ? (\r\n            <div>\r\n              <h4>Location</h4>\r\n              <div>\r\n                <label>\r\n                  <strong>Title:</strong>\r\n                </label>{\" \"}\r\n                {currentLocation.title}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Description:</strong>\r\n                </label>{\" \"}\r\n                {currentLocation.description}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Status:</strong>\r\n                </label>{\" \"}\r\n                {currentLocation.published ? \"Published\" : \"Pending\"}\r\n              </div>\r\n              {(this.state.loggedInUser == currentLocation.authorId || this.state.isMod || this.state.isAdmin) && (\r\n                <Link\r\n                  to={\"/admin/locations/\" + currentLocation.id}\r\n                  className=\"badge badge-warning\"\r\n                >\r\n                  Edit\r\n                </Link>\r\n              )}\r\n              \r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <br />\r\n              <p>Please click on a Location...</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import http from \"../http-common\";\r\nimport authHeader from './auth-header';\r\n\r\nclass OptionsDataService {\r\n  getAll() {\r\n    return http.get(\"/options\", { headers: authHeader() });\r\n  }\r\n\r\n  get(id) {\r\n    return http.get(`/options/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n  create(data) {\r\n    return http.post(\"/options\", data, { headers: authHeader() });\r\n  }\r\n\r\n  update(id, data) {\r\n    return http.put(`/options/${id}`, data, { headers: authHeader() });\r\n  }\r\n\r\n  delete(id) {\r\n    return http.delete(`/options/${id}`, { headers: authHeader() });\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default new OptionsDataService();","import React, { Component } from \"react\";\r\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\r\nmapboxgl.workerClass = MapboxWorker;\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\r\n\r\n\r\nconst containerStyle: React.CSSProperties = {\r\n  position: 'absolute',\r\n  zIndex: 10,\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  boxShadow: '0px 1px 4px rgba(0, 0, 0, .3)',\r\n  border: '1px solid rgba(0, 0, 0, 0.1)',\r\n  bottom: 40, \r\n  right: 10, \r\n  top: 'auto', \r\n  left: 'auto',\r\n};\r\n\r\nconst positions = {\r\n  'top-right': { top: 10, right: 10, bottom: 'auto', left: 'auto' },\r\n  'top-left': { top: 10, left: 10, bottom: 'auto', right: 'auto' },\r\n  'bottom-right': { bottom: 10, right: 10, top: 'auto', left: 'auto' },\r\n  'bottom-left': { bottom: 10, left: 10, top: 'auto', right: 'auto' }\r\n};\r\n\r\nconst buttonStyle = {\r\n  backgroundColor: '#f9f9f9',\r\n  opacity: 0.95,\r\n  transition: 'background-color 0.16s ease-out',\r\n  cursor: 'pointer',\r\n  border: 0,\r\n  height: 26,\r\n  width: 26,\r\n  backgroundImage: `url('https://api.mapbox.com/mapbox.js/v2.4.0/images/icons-000000@2x.png')`,\r\n  backgroundPosition: '0px 0px',\r\n  backgroundSize: '26px 260px',\r\n  outline: 0\r\n};\r\n\r\nconst buttonStyleHovered = {\r\n  backgroundColor: '#fff',\r\n  opacity: 1\r\n};\r\n\r\nconst buttonStylePlus = {\r\n  borderBottom: '1px solid rgba(0, 0, 0, 0.1)',\r\n  borderTopLeftRadius: 2,\r\n  borderTopRightRadius: 2\r\n};\r\n\r\nconst buttonStyleMinus = {\r\n  backgroundPosition: '0px -26px',\r\n  borderBottomLeftRadius: 2,\r\n  borderBottomRightRadius: 2\r\n};\r\n\r\nconst [PLUS, MINUS] = [0, 1];\r\nconst POSITIONS = Object.keys(positions);\r\n\r\n\r\n\r\nexport default class ZoomControl extends React.Component<Props, State> {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t\r\n\r\n\t\t this.onMouseOut = this.onMouseOut.bind(this);\r\n\t\t this.plusOver = this.plusOver.bind(this);\r\n\t\t this.minusOver = this.minusOver.bind(this);\r\n\t\t this.onClickPlus = this.onClickPlus.bind(this);\r\n\t\t this.onClickMinus = this.onClickMinus.bind(this);\r\n\t\t\r\n\r\n\t\tthis.state = {\r\n\t\t    hover: undefined\r\n\t\t  };\r\n\t}\r\n\r\n\r\n  \r\n\r\n  onMouseOut() {\r\n    this.setState({ hover: undefined });\r\n  }\r\n\r\n  plusOver() {\r\n    if (PLUS !== this.state.hover) {\r\n      this.setState({ hover: PLUS });\r\n    }\r\n  }\r\n\r\n  minusOver(){\r\n    if (MINUS !== this.state.hover) {\r\n      this.setState({ hover: MINUS });\r\n    }\r\n  }\r\n\r\n  onClickPlus() {\r\n  \tthis.props.map.zoomTo(this.props.map.getZoom() + 0.5);\r\n  }\r\n\r\n  onClickMinus  () {\r\n\tthis.props.map.zoomTo(this.props.map.getZoom() - 0.5);\r\n  }\r\n\r\n  render() {\r\n\r\n  \tconst { position, style, className, tabIndex } = this.props;\r\n    const { hover } = this.state;\r\n    const plusStyle = {\r\n      ...buttonStyle,\r\n      ...buttonStylePlus,\r\n      ...(hover === PLUS ? buttonStyleHovered : {})\r\n    };\r\n    const minusStyle = {\r\n      ...buttonStyle,\r\n      ...buttonStyleMinus,\r\n      ...(hover === MINUS ? buttonStyleHovered : {})\r\n    };\r\n  \treturn (\r\n  \t\t<div\r\n        className={className}\r\n        tabIndex={tabIndex}\r\n        style={{ ...containerStyle, ...positions[1], ...style }}\r\n      >\r\n        <button\r\n          id=\"zoomIn\"\r\n          type=\"button\"\r\n          style={plusStyle}\r\n          aria-label=\"Zoom in\"\r\n          onMouseOver={this.plusOver}\r\n          onMouseOut={this.onMouseOut}\r\n          onClick={this.onClickPlus}\r\n        />\r\n        <button\r\n          id=\"zoomOut\"\r\n          type=\"button\"\r\n          style={minusStyle}\r\n          aria-label=\"Zoom out\"\r\n          onMouseOver={this.minusOver}\r\n          onMouseOut={this.onMouseOut}\r\n          onClick={this.onClickMinus}\r\n        />\r\n      </div>\r\n  \t)\r\n  }\r\n}","import React, { Component } from \"react\";\r\n\r\nimport UserDataService from \"../services/user.service\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport CategoryDataService from \"../services/category.service\";\r\n\r\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\r\n \r\nimport ZoomControl from '../components/zoom-control.component';\r\n\r\nmapboxgl.workerClass = MapboxWorker;\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\r\n\r\nexport default class Map extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getLocationData = this.getLocationData.bind(this);\r\n    this.getPublishedLocations = this.getPublishedLocations.bind(this);\r\n    this.getCategories = this.getCategories.bind(this);\r\n    this.getLocation = this.getLocation.bind(this);\r\n    this.formatGeoJSON = this.formatGeoJSON.bind(this);\r\n    this.initMap = this.initMap.bind(this);\r\n\r\n    this.state = {\r\n      locations: [],\r\n      currentLocation: null,\r\n      lat: this.props.lat ||-37.81333017785542,\r\n      lng: this.props.lng || 144.9614772172758,\r\n      zoom: this.props.zoom || 9,\r\n      map:null,\r\n      categories:[],\r\n      catColors:{}\r\n    };\r\n    this.mapContainer = React.createRef();\r\n  }\r\n  \r\n\r\n  componentDidMount() {\r\n    this.getCategories();\r\n    this.getLocationData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if(this.props.latitude !== prevProps.latitude || this.props.longitude !== prevProps.longitude || this.props.id !== prevProps.id) {\r\n      this.setState({\r\n        lat: this.props.lat ||-37.81333017785542,\r\n        lng: this.props.lng || 144.9614772172758,\r\n        zoom: this.props.zoom || 9\r\n      });\r\n      this.getLocationData();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.map !== null) {\r\n      this.state.map.remove();\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  getLocationData () {\r\n    if (this.props.id) {\r\n      this.getLocation(this.props.id);\r\n    } else {\r\n      this.getPublishedLocations();\r\n    }\r\n    \r\n  }\r\n\r\n  getPublishedLocations() {\r\n    LocationDataService.getPublished()\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState({\r\n          locations: this.formatGeoJSON(response.data)\r\n        });\r\n        this.initMap();\r\n        console.log(this.state.locations);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getLocation(id) {\r\n    LocationDataService.get(id)\r\n      .then(response => {\r\n        console.log(\"response.data\");\r\n        console.log(response.data);\r\n        this.setState({\r\n          locations: this.formatGeoJSON([response.data])\r\n        });\r\n        this.initMap();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getCategories(cb) {\r\n    CategoryDataService.getAll()\r\n      .then(response => {\r\n        console.log(response.data);\r\n        var catColors = {};\r\n        response.data.forEach((category) => {\r\n          catColors[category.id.toString()] = category.color;\r\n        });\r\n        this.setState({\r\n          categories: response.data,\r\n          catColors : catColors\r\n        });\r\n        console.log('state');\r\n        console.log(this.state);\r\n        \r\n        \r\n        typeof cb === 'function' && cb();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n    \r\n  }\r\n\r\n\r\n\r\n  initMap() {\r\n\r\n    if (this.state.map !== null) {\r\n      this.state.map.remove();\r\n    }\r\n    const { lng, lat, zoom } = this.state;\r\n    const map = new mapboxgl.Map({\r\n      container: this.mapContainer.current,\r\n      style: 'mapbox://styles/melmo/ckotwhxhj670j17p61zhj5x3p',\r\n      //style: 'mapbox://styles/mapbox/light-v9',\r\n      center: [lng, lat],\r\n      zoom: zoom\r\n    });\r\n\r\n    this.setState({\r\n      map : map\r\n    });\r\n\r\n    map.on('move', () => {\r\n      this.setState({\r\n        lng: map.getCenter().lng.toFixed(4),\r\n        lat: map.getCenter().lat.toFixed(4),\r\n        zoom: map.getZoom().toFixed(2)\r\n      });\r\n    });\r\n\r\n    console.log();\r\n    \r\n    map.on('load', () => {\r\n      map.addSource('locations', {\r\n        type: 'geojson',\r\n        data: this.state.locations\r\n      });\r\n\r\n      // Add a layer showing the places.\r\n      map.addLayer({\r\n        'id': 'locations',\r\n        'type': 'symbol',\r\n        'source': 'locations',\r\n        'layout': {\r\n        'text-line-height': 1, // this is to avoid any padding around the \"icon\"\r\n       'text-padding': 0,\r\n       'text-anchor': 'center', // center, so when rotating the map, the \"icon\" stay on the same location\r\n       'text-offset': [0, -0.3], // give it a little offset on y, so when zooming it stay on the right place\r\n       'text-allow-overlap': true,\r\n       'text-ignore-placement': true,\r\n          'text-field' : String.fromCharCode(0xf041),\r\n          'text-font' : ['Font Awesome 5 Free Solid'],\r\n          'text-size': 15,\r\n          'icon-optional': true,\r\n          //'icon-image': 'marker-15',\r\n          'icon-allow-overlap': true,\r\n          'icon-size':1,\r\n\r\n        },\r\n        paint: {\r\n          \"text-color\": [\r\n            'get', ['get','category'], ['literal', this.state.catColors]\r\n             \r\n            ]\r\n        }\r\n      });\r\n    });\r\n\r\n    if (!this.props.id) {\r\n\r\n          // When a click event occurs on a feature in the places layer, open a popup at the\r\n  // location of the feature, with description HTML from its properties.\r\n      map.on('click', 'locations', function (e) {\r\n        var coordinates = e.features[0].geometry.coordinates.slice();\r\n        var description = e.features[0].properties.description;\r\n         \r\n        // Ensure that if the map is zoomed out such that multiple\r\n        // copies of the feature are visible, the popup appears\r\n        // over the copy being pointed to.\r\n        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n      }\r\n       \r\n      new mapboxgl.Popup()\r\n        .setLngLat(coordinates)\r\n        .setHTML(description)\r\n        .addTo(map);\r\n      });\r\n       \r\n      // Change the cursor to a pointer when the mouse is over the places layer.\r\n      \r\n      map.on('mouseenter', 'locations', function () {\r\n        map.getCanvas().style.cursor = 'pointer';\r\n      });\r\n       \r\n      // Change it back to a pointer when it leaves.\r\n      map.on('mouseleave', 'locations', function () {\r\n        map.getCanvas().style.cursor = '';\r\n      });\r\n\r\n    }\r\n\r\n\r\n\r\n    \r\n \r\n\r\n  }\r\n\r\n  formatGeoJSON(locations) {\r\n    \r\n    var obj = locations.map(function(location, index) {\r\n      if (location.images && location.lead_image) {\r\n        var image = location.images.find(image => {\r\n          return image.id == location.lead_image;\r\n        });\r\n      }\r\n      \r\n      var description = '<a class=\"popup\" target=\"_blank\" href=\"'+process.env.REACT_APP_DOMAIN +'/locations/'\r\n            + location.slug \r\n            + '\"><h4>'\r\n            + location.title \r\n            + '</h4>';\r\n      if (image) {\r\n        description += '<img src=\"'\r\n            + image.url\r\n            + '\"/>';\r\n      }\r\n      description += '<div>' + location.description + '</div></a>';\r\n      return {\r\n        'type': 'Feature',\r\n        'properties': {\r\n          'description': description ,\r\n          'category' : location.categoryId ? location.categoryId.toString() : '0',\r\n          'color' : ''\r\n        },\r\n        'geometry': {\r\n          'type': 'Point',\r\n          'coordinates': [location.longitude,location.latitude]\r\n        }\r\n      }\r\n    });\r\n\r\n    var geoLocations = {\r\n      \"type\": \"FeatureCollection\",\r\n      \"features\": obj\r\n    }\r\n    console.log(obj);\r\n    return geoLocations;\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"\">\r\n        <div id=\"map\" ref={this.mapContainer} className=\"map-container\"></div>\r\n        <ZoomControl map={this.state.map}/>\r\n        {!this.props.id && this.state.categories && (\r\n          <div id=\"legend\">\r\n          <h5>Categories</h5>\r\n          {this.state.categories.map(category => (\r\n\r\n          <p key={category.id}>\r\n          <span className=\"color-block\" style={{backgroundColor : category.color}}></span>\r\n          {category.name}\r\n          </p>\r\n          \r\n          ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\n\r\nconst YoutubeEmbed = ({ embedId }) => (\r\n  <div className=\"video-responsive\">\r\n    <iframe\r\n      width=\"853\"\r\n      height=\"480\"\r\n      src={`https://www.youtube.com/embed/${embedId}`}\r\n      frameBorder=\"0\"\r\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n      allowFullScreen\r\n    />\r\n  </div>\r\n);\r\n\r\n\r\n\r\nexport default YoutubeEmbed;","import React, { Component } from \"react\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport UserDataService from \"../services/user.service\";\r\nimport ImageDataService from \"../services/image.service\";\r\nimport ResidentDataService from \"../services/resident.service\";\r\nimport ResourceDataService from \"../services/resource.service\";\r\nimport OptionsDataService from \"../services/options.service\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\nimport Map from \"../components/map.component\";\r\nimport YoutubeEmbed from \"../components/youtube.component\";\r\nimport Slider from \"react-slick\";\r\n\r\n\r\nexport default class Location extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.getLocation = this.getLocation.bind(this);\r\n    this.getImages = this.getImages.bind(this);\r\n    this.getResidents = this.getResidents.bind(this);\r\n    this.getResources = this.getResources.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    \r\n    \r\n\r\n    this.state = {\r\n      currentLocation: {\r\n        id: null,\r\n        title: \"\",\r\n        description: \"\",\r\n        published: false,\r\n        authorId:null,\r\n        latitude:null,\r\n        longitude:null,\r\n        history:'',\r\n        introduction:'',\r\n        youtube_id : '',\r\n        call_to_action_text :'',\r\n        call_to_action_link : '',\r\n        call_to_action_button : ''\r\n      },\r\n      images : [],\r\n      residents : [],\r\n      resources :[],\r\n      options : {}\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getLocation(this.props.match.params.slug);\r\n    this.getOptions();\r\n  }\r\n\r\n\r\n  getLocation(slug) {\r\n    console.log(slug);\r\n    LocationDataService.findBySlug(slug)\r\n      .then(response => {\r\n        console.log(\"response.data\");\r\n        console.log(response.data);\r\n\r\n        this.setState({\r\n          currentLocation: response.data\r\n        });\r\n        if (this.state.currentLocation !== null) {\r\n          this.getImages(this.state.currentLocation.id);\r\n          this.getResidents(this.state.currentLocation.id);\r\n          this.getResources(this.state.currentLocation.id);\r\n        }\r\n        \r\n        \r\n      })\r\n      .catch(e => {\r\n        console.log(\"e.data\");\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  \r\n\r\n  getImages(id) {\r\n    ImageDataService.findByLocation(id)\r\n      .then(response => {\r\n        this.setState({\r\n          images : response.data\r\n        })\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getResidents(id) {\r\n\r\n    ResidentDataService.findByLocation(id)\r\n      .then(response => {\r\n        this.setState({\r\n          residents : response.data\r\n        })\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n\r\n  getResources(id) {\r\n    ResourceDataService.findByLocation(id)\r\n      .then(response => {\r\n        this.setState({\r\n          resources : response.data\r\n        })\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getOptions() {\r\n    OptionsDataService.get(1)\r\n      .then(response => {\r\n        console.log(\"options\");\r\n        console.log(response.data);\r\n        this.setState({\r\n          options: response.data\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n  \r\n\r\n  render() {\r\n    const { currentLocation, images, residents, resources } = this.state;\r\n\r\n    return (\r\n      <div className=\"location-view\">\r\n        {currentLocation  ? (\r\n          <div className=\"\">\r\n            \r\n            <h1>{currentLocation.title}</h1>\r\n            <div className=\"introduction\">{currentLocation.introduction}</div>\r\n            \r\n            \r\n            <div id=\"images\">\r\n                <Slider {...{\r\n                  dots: true,\r\n                  infinite: true,\r\n                  speed: 500,\r\n                  slidesToShow: 1,\r\n                  slidesToScroll: 1,\r\n                  autoplay:true,\r\n                  arrows:false\r\n                }}>\r\n                {images.map(image => (\r\n\r\n                  <div key={image.id}>\r\n                  <img src={image.url}/>\r\n                    \r\n                  </div>\r\n\r\n                  ))}\r\n                </Slider>\r\n                </div>\r\n\r\n              \r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n              \r\n              </div>\r\n              <div className=\"col-md-8\">\r\n                {currentLocation.history && currentLocation.history !== '' && (\r\n                  <div dangerouslySetInnerHTML={{\r\n                  __html: currentLocation.history\r\n                }}></div>\r\n                )}\r\n                {currentLocation.youtube_id && currentLocation.youtube_id !== '' && (\r\n                <div id=\"youtube\">\r\n                  <YoutubeEmbed embedId={currentLocation.youtube_id} />\r\n                </div>\r\n                )}\r\n              </div>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"map-wrap-small\">\r\n                  <Map\r\n                    zoom=\"13\"\r\n                    lat={currentLocation.latitude}\r\n                    lng={currentLocation.longitude}\r\n                    id={currentLocation.id}\r\n                  />\r\n                  </div>\r\n              </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-8 offset-sm-2\">\r\n\r\n                  {currentLocation.call_to_action_link && (\r\n                    <div className=\"call-to-action\">\r\n                      {currentLocation.call_to_action_text && (\r\n                        <p>{currentLocation.call_to_action_text}</p>\r\n                      )}\r\n                      <a target=\"_blank\" className=\"btn btn-lg btn-action\" href={currentLocation.call_to_action_link}>{currentLocation.call_to_action_button || 'Take action now'}</a>\r\n                    </div>\r\n\r\n                  )}\r\n                  {!currentLocation.call_to_action_link && this.state.options.call_to_action_link && (\r\n                    <div className=\"call-to-action\">\r\n                      {this.state.options.call_to_action_text && (\r\n                        <p>{this.state.options.call_to_action_text}</p>\r\n                      )}\r\n                      <a target=\"_blank\" className=\"btn btn-lg btn-action\" href={this.state.options.call_to_action_link}>{this.state.options.call_to_action_button || 'Take action now'}</a>\r\n                    </div>\r\n\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n              \r\n              {residents.length > 0 && (\r\n              <div  id=\"residents\" className=\"col-12\">\r\n                <h2>Resident Stories</h2>\r\n              <div>\r\n              <div className=\"col-sm-8 offset-sm-2\">\r\n                <Slider settings = {{\r\n                  dots: true,\r\n                  infinite: true,\r\n                  speed: 500,\r\n                  slidesToShow: 1,\r\n                  slidesToScroll: 1\r\n                }}>\r\n                {residents.map(resident => (\r\n\r\n                  <div className=\"card\" key={resident.id}>\r\n                  <div className=\"card-body\">\r\n\r\n                  <h5 className=\"card-title\">{resident.name}</h5>\r\n                    \r\n                    <div>{resident.story}</div>\r\n                  </div>\r\n                  </div>\r\n\r\n                  ))}\r\n                </Slider>\r\n                </div>\r\n                </div>\r\n              </div>\r\n              )}\r\n              {resources.length > 0 && (\r\n              <div className=\"col-12\">\r\n              \r\n              <h2>Further resources</h2>\r\n              <ul id=\"resources\">\r\n                {resources.map(resource => (\r\n                  <li key={resource.id}>\r\n                    <a target=\"_blank\" href={resource.url}>{resource.name}</a><br/>\r\n                    <p>{resource.description}</p>\r\n                  </li>\r\n\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n              )}\r\n              \r\n            </div>\r\n\r\n\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <br />\r\n            <p>No location found</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\nimport UserDataService from \"../services/user.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vusername = value => {\r\n  if (value.length < 3 || value.length > 20) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The username must be between 3 and 20 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = value => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class AddUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeUsername = this.onChangeUsername.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n    this.onChangeRole = this.onChangeRole.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.saveUser = this.saveUser.bind(this);\r\n    this.newUser = this.newUser.bind(this);\r\n\r\n    this.state = {\r\n      id: null,\r\n      username: \"\",\r\n      email: \"\", \r\n      role:1,\r\n      password:\"\",\r\n      success: false,\r\n      message:\"\"\r\n    };\r\n  }\r\n\r\n  onChangeUsername(e) {\r\n    this.setState({\r\n      username: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeRole(e) {\r\n    this.setState({\r\n      role: e.target.value\r\n    });\r\n  }\r\n\r\n  saveUser(e) {\r\n    e.preventDefault();\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      var data = {\r\n        user : {\r\n          username: this.state.username,\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n          role:this.state.role\r\n        }\r\n        \r\n      };\r\n\r\n      UserDataService.create(data)\r\n        .then(response => {\r\n          console.log(response);\r\n          if (response.data.success) {\r\n            this.setState({\r\n              id: response.data.user.id,\r\n              username: response.data.user.username,\r\n              email: response.data.user.email,\r\n              role: response.data.user.role,\r\n\r\n              success: response.data.success,\r\n              message:response.data.message\r\n            });\r\n          } else {\r\n            this.setState({\r\n\r\n              success: response.data.success,\r\n              message:response.data.message\r\n            });\r\n          }\r\n          \r\n          console.log(response.data);\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n      }\r\n  }\r\n\r\n  newUser() {\r\n    this.setState({\r\n      id: null,\r\n      email: \"\",\r\n      username: \"\",\r\n      password:\"\",\r\n      role: 1,\r\n      message:\"\",\r\n      success: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"submit-form\">\r\n        {this.state.success ? (\r\n          <div>\r\n            <h4>{this.state.message}</h4>\r\n            <a className=\"btn\" href={'/admin/users/' + this.state.id}>\r\n              View user\r\n            </a>\r\n            <button className=\"btn\" onClick={this.newUser}>\r\n              Add another user\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h4>Add new user</h4>\r\n            <Form\r\n            onSubmit={this.saveUser}\r\n              ref={c => {\r\n                this.form = c;\r\n              }}\r\n            >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"username\">Username</label>\r\n              <Input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"username\"\r\n                validations={[required, vusername]}\r\n                value={this.state.username}\r\n                onChange={this.onChangeUsername}\r\n                name=\"username\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"email\"\r\n                validations={[required, email]}\r\n                value={this.state.email}\r\n                onChange={this.onChangeEmail}\r\n                name=\"email\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"password\"\r\n                validations={[required, vpassword]}\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                name=\"password\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"role\">Role</label>\r\n              <select className=\"form-control\"\r\n                id=\"role\"\r\n                required\r\n                value={this.state.role}\r\n                onChange={this.onChangeRole}\r\n                name=\"role\">\r\n                <option value=\"1\">User</option>\r\n                <option value=\"2\">Moderator</option>\r\n                <option value=\"3\">Admin</option>\r\n              </select>\r\n              \r\n            </div>\r\n\r\n           \r\n\r\n            <button className=\"btn btn-success\">\r\n              Submit\r\n            </button>\r\n            <p>{this.state.message}</p>\r\n\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n            </Form>\r\n          </div>\r\n\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport UserDataService from \"../services/user.service\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vusername = value => {\r\n  if (value.length < 3 || value.length > 20) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The username must be between 3 and 20 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = value => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class User extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeUsername = this.onChangeUsername.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n    this.onChangeDoUpdatePassword = this.onChangeDoUpdatePassword.bind(this);\r\n    this.onChangeRoleId = this.onChangeRoleId.bind(this);\r\n    this.getUser = this.getUser.bind(this);\r\n    this.updateUser = this.updateUser.bind(this);\r\n    this.deleteUser = this.deleteUser.bind(this);\r\n\r\n    this.state = {\r\n      currentUser: {\r\n        id: null,\r\n        username: \"\",\r\n        email: \"\",\r\n        roleId: 0,\r\n        password:\"\"\r\n      },\r\n      message: \"\",\r\n      isLoggedIn:false,\r\n      isAdmin:false,\r\n      isMod:false,\r\n      loggedInUser:0,\r\n      newPassword : \"\",\r\n      doUpdatePassword : false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const loggedInUser = AuthService.getCurrentUser();\r\n\r\n    if (loggedInUser) {\r\n      this.setState({\r\n        loggedInUser: loggedInUser.id,\r\n        isLoggedIn:true,\r\n        isMod: loggedInUser.roles.includes(\"ROLE_MODERATOR\"),\r\n        isAdmin: loggedInUser.roles.includes(\"ROLE_ADMIN\"),\r\n      });\r\n    }\r\n\r\n    if (this.props.match !== undefined) {\r\n      this.getUser(this.props.match.params.id);\r\n    } else {\r\n      this.getUser(this.props.id);\r\n    }\r\n    console.log(this.state.currentUser);\r\n  }\r\n\r\n  onChangeDoUpdatePassword(e) {\r\n    this.setState({\r\n      doUpdatePassword : !this.state.doUpdatePassword\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    const newPassword = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentUser: {\r\n          ...prevState.currentUser,\r\n          password: newPassword\r\n        },\r\n        newPassword:newPassword\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeUsername(e) {\r\n    const username = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentUser: {\r\n          ...prevState.currentUser,\r\n          username: username\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    const email = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentUser: {\r\n        ...prevState.currentUser,\r\n        email: email\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeRoleId(e) {\r\n    const roleId = e.target.value;\r\n    \r\n    this.setState(prevState => ({\r\n      currentUser: {\r\n        ...prevState.currentUser,\r\n        roleId: roleId\r\n      }\r\n    }));\r\n  }\r\n\r\n  getUser(id) {\r\n    UserDataService.get(id)\r\n      .then(response => {\r\n        this.setState({\r\n          currentUser: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  updateUser(e) {\r\n\r\n    e.preventDefault();\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n\r\n      UserDataService.update(\r\n        this.state.currentUser.id, { \r\n          user : this.state.currentUser,\r\n          updatePassword : this.state.newPassword ? true : false\r\n        }\r\n        \r\n      )\r\n        .then(response => {\r\n          console.log(\"updated\");\r\n          console.log(response.data);\r\n          this.getUser(this.state.currentUser.id);\r\n          this.setState(function (prevState) {\r\n            return {\r\n              message: response.data.message,\r\n              newPassword:\"\",\r\n              doUpdatePassword : false\r\n            }\r\n            \r\n          });\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n      }\r\n  }\r\n\r\n  deleteUser() {    \r\n    UserDataService.delete(this.state.currentUser.id)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.props.history.push('/admin/users')\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { currentUser, isAdmin, loggedInUser, newPassword, doUpdatePassword } = this.state;\r\n\r\n    var roles = {\r\n      0 : \"\",\r\n      1 : \"User\",\r\n      2 : \"Moderator\",\r\n      3 : \"Admin\"\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        {currentUser ? (\r\n          <div className=\"edit-form\">\r\n            <h4>{currentUser.username}</h4>\r\n            <Form\r\n              onSubmit={this.saveUser}\r\n              ref={c => {\r\n                this.form = c;\r\n              }}\r\n            >\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"username\">Username</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"username\"\r\n                  validations={[required, vusername]}\r\n                  value={currentUser.username}\r\n                  onChange={this.onChangeUsername}\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"email\">Email</label>\r\n                <Input\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  id=\"email\"\r\n                  validations={[required, email]}\r\n                  value={currentUser.email}\r\n                  onChange={this.onChangeEmail}\r\n                />\r\n              </div>\r\n             \r\n              {isAdmin && loggedInUser !== currentUser.id ? (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"roleId\">Role</label>\r\n                  <select className=\"form-control\"\r\n                    id=\"roleId\"\r\n                    required\r\n                    value={currentUser.roleId}\r\n                    onChange={this.onChangeRoleId}\r\n                    name=\"roleId\">\r\n                    <option value=\"1\">User</option>\r\n                    <option value=\"2\">Moderator</option>\r\n                    <option value=\"3\">Admin</option>\r\n                  </select>\r\n                </div>\r\n              ) : (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"roleDisplay\">Role</label>\r\n                  <Input disabled \r\n                    className=\"form-control\" \r\n                    id=\"roleDisplay\" \r\n                    name=\"roleDisplay\"\r\n                    value={roles[currentUser.roleId]}\r\n                    />\r\n                </div>\r\n              )\r\n              }\r\n              {((isAdmin || loggedInUser === currentUser.id) && !doUpdatePassword) && (\r\n                <div className=\"form-group\">\r\n                  <button\r\n                    className=\"badge\"\r\n                    onClick={this.onChangeDoUpdatePassword}\r\n                  >\r\n                    Change password\r\n                  </button>\r\n                </div>\r\n              )\r\n              }\r\n               {((isAdmin || loggedInUser === currentUser.id) && doUpdatePassword) && (\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"password\">Password</label>\r\n                  <Input \r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    id=\"password\"\r\n                    validations={[vpassword]}\r\n                    value={newPassword}\r\n                    onChange={this.onChangePassword}\r\n                    name=\"password\"\r\n                  />\r\n                </div>\r\n              )\r\n              }\r\n            \r\n            {(isAdmin && loggedInUser !== currentUser.id) && (\r\n            <button\r\n              className=\"badge badge-danger mr-2\"\r\n              onClick={this.deleteUser}\r\n            >\r\n              Delete\r\n            </button>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"badge badge-success\"\r\n              onClick={this.updateUser}\r\n            >\r\n              Update\r\n            </button>\r\n\r\n\r\n              <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n              \r\n            </Form>\r\n\r\n            \r\n             \r\n            \r\n            \r\n            <p>{this.state.message}</p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <br />\r\n            <p>Please click on a User...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport UserDataService from \"../services/user.service\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class UsersList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeSearchUsername = this.onChangeSearchUsername.bind(this);\r\n    this.retrieveUsers = this.retrieveUsers.bind(this);\r\n    this.refreshList = this.refreshList.bind(this);\r\n    this.setActiveUser = this.setActiveUser.bind(this);\r\n    this.removeAllUsers = this.removeAllUsers.bind(this);\r\n    this.searchUsername = this.searchUsername.bind(this);\r\n\r\n    this.state = {\r\n      users: [],\r\n      currentUser: null,\r\n      currentIndex: -1,\r\n      searchUsername: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.retrieveUsers();\r\n  }\r\n\r\n  onChangeSearchUsername(e) {\r\n    const searchUsername = e.target.value;\r\n\r\n    this.setState({\r\n      searchUsername: searchUsername\r\n    });\r\n  }\r\n\r\n  retrieveUsers() {\r\n    UserDataService.getAll()\r\n      .then(response => {\r\n        this.setState({\r\n          users: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  refreshList() {\r\n    this.retrieveUsers();\r\n    this.setState({\r\n      currentUser: null,\r\n      currentIndex: -1\r\n    });\r\n  }\r\n\r\n  setActiveUser(user, index) {\r\n    this.setState({\r\n      currentUser: user,\r\n      currentIndex: index\r\n    });\r\n  }\r\n\r\n  removeAllUsers() {\r\n    UserDataService.deleteAll()\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.refreshList();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  searchUsername() {\r\n    this.setState({\r\n      currentUsername: null,\r\n      currentIndex: -1\r\n    });\r\n\r\n    UserDataService.findByUsername(this.state.searchUsername)\r\n      .then(response => {\r\n        this.setState({\r\n          users: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { searchUsername, users, currentUser, currentIndex } = this.state;\r\n\r\n    return (\r\n      <div className=\"list row\">\r\n        <div className=\"col-md-8\">\r\n          <div className=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Search by username\"\r\n              value={searchUsername}\r\n              onChange={this.onChangeSearchUsername}\r\n            />\r\n            <div className=\"input-group-append\">\r\n              <button\r\n                className=\"btn btn-outline-secondary\"\r\n                type=\"button\"\r\n                onClick={this.searchUsername}\r\n              >\r\n                Search\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          <h4>Users List</h4>\r\n\r\n          <ul className=\"list-group\">\r\n            {users &&\r\n              users.map((user, index) => (\r\n                <li\r\n                  className={\r\n                    \"list-group-item \" +\r\n                    (index === currentIndex ? \"active\" : \"\")\r\n                  }\r\n                  onClick={() => this.setActiveUser(user, index)}\r\n                  key={index}\r\n                >\r\n                  {user.username}\r\n                </li>\r\n              ))}\r\n          </ul>\r\n\r\n          \r\n        </div>\r\n        <div className=\"col-md-6\">\r\n          {currentUser ? (\r\n            <div>\r\n              <h4>User</h4>\r\n              <div>\r\n                <label>\r\n                  <strong>Username:</strong>\r\n                </label>{\" \"}\r\n                {currentUser.username}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Email:</strong>\r\n                </label>{\" \"}\r\n                {currentUser.email}\r\n              </div>\r\n              <div>\r\n                <label>\r\n                  <strong>Role:</strong>\r\n                </label>{\" \"}\r\n                {currentUser.role}\r\n              </div>\r\n\r\n              <Link\r\n                to={\"/admin/users/\" + currentUser.id}\r\n                className=\"badge badge-warning\"\r\n              >\r\n                Edit\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <br />\r\n              <p>Please click on a user</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\n\r\nexport default function PrivateRoute ({component: Component, auth, authCheckComplete, ...rest}) {\r\n\tconsole.log(\"auth: \" + auth);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => authCheckComplete === false\r\n      \t? <div></div>\r\n      \t: auth === true\r\n        \t? <Component {...props} />\r\n        \t: <Redirect to={{pathname: '/login', state: {from: props.location}}} />}\r\n    />\r\n  )\r\n}\r\n\r\n\r\n\r\n/*\r\n\r\nexport default class PrivateRoute extends Component {\r\n\r\n\tconstructor(props) {\r\n\t    super(props);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn(\r\n\t\t\t<Route\r\n\t\t      {...this.rest}\r\n\t\t      render={(props) => this.auth === false\r\n\t\t        ? <Component {...this.props} />\r\n\t\t        : <Redirect to={{pathname: '/login', state: {from: props.location}}} />}\r\n\t\t    />\r\n\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n*/","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleLogin = this.handleLogin.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      loading: false,\r\n      message: \"\"\r\n    };\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    });\r\n  }\r\n\r\n  handleLogin(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      loading: true\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      AuthService.login(this.state.email, this.state.password).then(\r\n        () => {\r\n          console.log(this.props);\r\n          //this.props.history.push(\"/profile\");\r\n          //window.location.reload();\r\n          window.location.pathname=\"/admin/locations\";\r\n          \r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            loading: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12 login\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n          <Form\r\n            onSubmit={this.handleLogin}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                name=\"email\"\r\n                value={this.state.email}\r\n                onChange={this.onChangeEmail}\r\n                validations={[required, email]}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                name=\"password\"\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                validations={[required]}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.loading}\r\n              >\r\n                {this.state.loading && (\r\n                  <span className=\"spinner-border spinner-border-sm\"></span>\r\n                )}\r\n                <span>Login</span>\r\n              </button>\r\n            </div>\r\n\r\n            {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n          <a href=\"./reset-password\">Password reset</a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = value => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class ResetPassword extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.resetPassword = this.resetPassword.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      password:\"\",\r\n      token:\"\",\r\n      id:0,\r\n      loading: true,\r\n      message: \"\",\r\n      success: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.props.match.params);\r\n    if (this.props.match === undefined) {\r\n      this.setState({\r\n        loading:false,\r\n        message : \"No valid token found.\"\r\n      });\r\n    } else {\r\n      AuthService.checkToken(this.props.match.params.id, this.props.match.params.token).then(\r\n        response => {\r\n          console.log(response);\r\n          this.setState({\r\n            loading:false,\r\n            message:response.message,\r\n            token:this.props.match.params.token,\r\n            id:this.props.match.params.id,\r\n            success:response.success\r\n          })\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  onChangePassword(e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    });\r\n  }\r\n\r\n  resetPassword(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      loading: true\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      AuthService.resetPassword(\r\n        this.state.email,\r\n        this.state.token,\r\n        this.state.id,\r\n        this.state.password\r\n      ).then(\r\n        (response) => {\r\n          console.log(response);\r\n          this.setState({\r\n            loading: false,\r\n            message: response.message,\r\n            success:response.success\r\n\r\n          });\r\n          \r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            loading: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n\r\n\r\n          <Form\r\n            onSubmit={this.resetPassword}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n\r\n          {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className={this.state.success ? 'alert alert-success' : 'alert alert-danger'} role=\"alert\">\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                name=\"password\"\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                validations={[required, vpassword]}\r\n              />\r\n            </div>\r\n\r\n            \r\n\r\n            <div className=\"form-group\">\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.loading}\r\n              >\r\n                {this.state.loading && (\r\n                  <span className=\"spinner-border spinner-border-sm\"></span>\r\n                )}\r\n                <span>Set new password</span>\r\n              </button>\r\n            </div>\r\n\r\n            \r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nconst required = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst email = value => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not a valid email.\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default class RequestToken extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.requestToken = this.requestToken.bind(this);\r\n    this.onChangeEmail = this.onChangeEmail.bind(this);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      loading: false,\r\n      message: \"\"\r\n    };\r\n  }\r\n\r\n  onChangeEmail(e) {\r\n    this.setState({\r\n      email: e.target.value\r\n    });\r\n  }\r\n\r\n  requestToken(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({\r\n      message: \"\",\r\n      loading: true\r\n    });\r\n\r\n    this.form.validateAll();\r\n\r\n    if (this.checkBtn.context._errors.length === 0) {\r\n      AuthService.requestToken(this.state.email).then(\r\n        (data) => {\r\n          console.log(data);\r\n          this.setState({\r\n            loading: false,\r\n            message: data.message\r\n          });\r\n          \r\n        },\r\n        error => {\r\n          const resMessage =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString();\r\n\r\n          this.setState({\r\n            loading: false,\r\n            message: resMessage\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n          <Form\r\n            onSubmit={this.requestToken}\r\n            ref={c => {\r\n              this.form = c;\r\n            }}\r\n          >\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <Input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                name=\"email\"\r\n                value={this.state.email}\r\n                onChange={this.onChangeEmail}\r\n                validations={[required, email]}\r\n              />\r\n            </div>\r\n\r\n            \r\n\r\n            <div className=\"form-group\">\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.state.loading}\r\n              >\r\n                {this.state.loading && (\r\n                  <span className=\"spinner-border spinner-border-sm\"></span>\r\n                )}\r\n                <span>Reset password</span>\r\n              </button>\r\n            </div>\r\n\r\n            {this.state.message && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert\" role=\"alert\">\r\n                  {this.state.message}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <CheckButton\r\n              style={{ display: \"none\" }}\r\n              ref={c => {\r\n                this.checkBtn = c;\r\n              }}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport Map from \"../components/map.component\";\r\nimport Flickity from \"react-flickity-component\";\r\nimport LocationDataService from \"../services/location.service\";\r\nimport OptionsDataService from \"../services/options.service\";\r\n\r\n\r\n\r\nexport default class Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getLocations = this.getLocations.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n\r\n    this.state = {\r\n      content: \"\",\r\n      locations: [],\r\n      options: {}\r\n    };\r\n  }\r\n\r\n  getLocations() {\r\n    LocationDataService.getPublished()\r\n      .then(response => {\r\n        var locations = response.data;\r\n\r\n        locations.map(location => {\r\n          if (location.lead_image) {\r\n            var image = location.images.find(image => {\r\n              return image.id == location.lead_image;\r\n            });\r\n            location.image_url = image.url;\r\n          } else {\r\n            location.image_url = \"./img/save-public-housing.jpg\";\r\n          }\r\n          \r\n        });\r\n          \r\n        this.setState({\r\n          locations: locations\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getOptions() {\r\n    OptionsDataService.get(1)\r\n      .then(response => {\r\n        this.setState({\r\n          options: response.data\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getLocations();\r\n    this.getOptions();\r\n  }\r\n\r\n  render() {\r\n\r\n    const flickityOptions = {\r\n      wrapAround : true,\r\n      pageDots : false\r\n    };\r\n    return (\r\n      <div className=\"container\">\r\n      <div className=\"row home-intro\">\r\n      <div className=\"col-md-6\">\r\n        \r\n        {this.state.options && (\r\n          <header >\r\n          <h1>{this.state.options.home_heading}</h1>\r\n\r\n          <div dangerouslySetInnerHTML={{\r\n            __html: this.state.options.home_text\r\n          }}></div>\r\n                    \r\n          </header>\r\n          )}\r\n        \r\n        </div>\r\n        <div className=\"col-md-5 offset-md-1\">\r\n         {this.state.options.call_to_action_link && (\r\n          <div className=\"call-to-action\">\r\n            {this.state.options.call_to_action_text && (\r\n              <p>{this.state.options.call_to_action_text}</p>\r\n            )}\r\n            <p className=\"call-to-action-button\">\r\n              <a target=\"_blank\" className=\"btn btn-lg btn-action\" href={this.state.options.call_to_action_link}>{this.state.options.call_to_action_button || 'Take action now'}</a>\r\n            </p>\r\n          </div>\r\n\r\n        )}\r\n        {this.state.locations.length > 0 && (\r\n        <Flickity\r\n          className={'carousel'} // default ''\r\n          elementType={'div'} // default 'div'\r\n          options={flickityOptions} // takes flickity options {}\r\n          disableImagesLoaded={false} // default false\r\n          reloadOnUpdate // default false\r\n          static // default false\r\n        >\r\n        {this.state.locations.map((location, index) => (\r\n\r\n\r\n\r\n          <a href={process.env.REACT_APP_DOMAIN + \"/locations/\" + location.slug}  className=\"location-slide\" key={location.id} >\r\n          <div className=\"card\">\r\n          {location.image_url && (\r\n          <img className=\"card-img-top\" src={location.image_url}/>\r\n          )}\r\n          <h4 className=\"card-footer\">{location.title}</h4>\r\n          \r\n          </div>\r\n          </a>\r\n        ))}\r\n\r\n        </Flickity>\r\n\r\n        )}\r\n       \r\n        \r\n        </div>\r\n        </div>\r\n        <div className=\"map-wrap\">\r\n          <Map zoom=\"6\" lat=\"-36.5\" lng=\"145.3\"/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport User from \"../components/user.component\";\r\n\r\nexport default class Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentUser: AuthService.getCurrentUser()\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { currentUser } = this.state;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        \r\n        <User id={currentUser.id}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n/*\r\n\r\n\r\n<header className=\"jumbotron\">\r\n          <h3>\r\n            <strong>{currentUser.username}</strong>\r\n          </h3>\r\n        </header>\r\n        <p>\r\n          <strong>Token:</strong>{\" \"}\r\n          {currentUser.accessToken.substring(0, 20)} ...{\" \"}\r\n          {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\r\n        </p>\r\n        <p>\r\n          <strong>Id:</strong>{\" \"}\r\n          {currentUser.id}\r\n        </p>\r\n        <p>\r\n          <strong>Email:</strong>{\" \"}\r\n          {currentUser.email}\r\n        </p>\r\n        <strong>Authorities:</strong>\r\n        <ul>\r\n          {currentUser.roles &&\r\n            currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\r\n        </ul>\r\n*/","import React, { Component } from \"react\";\r\nimport CategoryDataService from \"../services/category.service\";\r\nimport axios from 'axios';\r\n\r\n\r\nexport default class CategoryList extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  \tthis.getCategories = this.getCategories.bind(this);\r\n  \tthis.onChangeName = this.onChangeName.bind(this);\r\n    this.onChangeColor = this.onChangeColor.bind(this);\r\n  \tthis.onRemove = this.onRemove.bind(this);\r\n  \tthis.onUpdate = this.onUpdate.bind(this);\r\n  \tthis.onChangeNewName = this.onChangeNewName.bind(this);\r\n    this.onChangeNewColor = this.onChangeNewColor.bind(this);\r\n  \tthis.onCreate = this.onCreate.bind(this);\r\n  \tthis.state = {\r\n  \t\tcategories : [],\r\n  \t\tnewCategory : {\r\n  \t\t\tname : '',\r\n        color : ''\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n  componentDidMount() {\r\n  \tthis.getCategories();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n  \tif(this.props.location !== prevProps.location) {\r\n  \t\tthis.getResidents(this.props.location);\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  getCategories(cb) {\r\n\t\tCategoryDataService.getAll()\r\n\t\t  .then(response => {\r\n        console.log(response.data);\r\n        this.setState({\r\n          categories: response.data\r\n        });\r\n        \r\n        \r\n        typeof cb === 'function' && cb();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  \t\r\n  }\r\n\r\n  onChangeName(id, e) {\r\n  \t\r\n\tconst newCategories = this.state.categories.map((category) => {\r\n      if (category.id === id) {\r\n        const updatedCategory = {\r\n          ...category,\r\n          name: e.target.value,\r\n        };\r\n \r\n        return updatedCategory;\r\n      }\r\n \r\n      return category;\r\n    });\r\n\tthis.setState({\r\n\t\tcategories : newCategories\r\n\t});\r\n  }\r\n\r\n  onChangeColor(id, e) {\r\n    \r\n  const newCategories = this.state.categories.map((category) => {\r\n      if (category.id === id) {\r\n        const updatedCategory = {\r\n          ...category,\r\n          color: e.target.value,\r\n        };\r\n \r\n        return updatedCategory;\r\n      }\r\n \r\n      return category;\r\n    });\r\n  this.setState({\r\n    categories : newCategories\r\n  });\r\n  }\r\n\r\n  \r\n\r\n  onRemove(id) {\r\n  \tif (window.confirm(\"Are you sure you want to delete this category?\")) {\r\n  \t\tCategoryDataService.delete(id)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getCategories();\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n\t  \t});\r\n  \t}\r\n  \t\r\n  }\r\n\r\n  onUpdate(e,id) {\r\n    e.preventDefault();\r\n  \tconst category = this.state.categories.find(category => {\r\n\t  return category.id === id\r\n\t});\r\n  \t\r\n  \tCategoryDataService.update(id, category)\r\n\t  \t.then(response => {\r\n\t  \t\tthis.getCategories( () => {\r\n            const newCategories = this.state.categories.map((category) => {\r\n                if (category.id === id) {\r\n                  const updatedCategory = {\r\n                    ...category,\r\n                    status:\"Updated successfully\",\r\n                  };\r\n           \r\n                  return updatedCategory;\r\n                }\r\n           \r\n                return category;\r\n              });\r\n            newCategories.sort((a, b) => (parseInt(a.id) > parseInt(b.id)) ? 1 : -1);\r\n            this.setState({\r\n              categories : newCategories\r\n            });\r\n            console.log('state');\r\n            console.log(this.state.categories);\r\n        });\r\n\t  \t})\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n        const newCategories = this.state.categories.map((category) => {\r\n            if (category.id === id) {\r\n              const updatedCategory = {\r\n                ...category,\r\n                status:\"Update unsuccessful\",\r\n              };\r\n       \r\n              return updatedCategory;\r\n            }\r\n       \r\n            return category;\r\n          });\r\n\r\n        this.setState({\r\n          categories : newCategories\r\n        });\r\n\t  \t});\r\n\r\n  }\r\n\r\n  onChangeNewName(e) {\r\n  \tthis.setState(prevState => ({\r\n       newCategory: {\r\n        ...prevState.newCategory,\r\n        name: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n  onChangeNewColor(e) {\r\n    this.setState(prevState => ({\r\n       newCategory: {\r\n        ...prevState.newCategory,\r\n        color: e.target.value\r\n      }\r\n    }));\r\n  }\r\n\r\n\r\n\r\n\r\n  onCreate() {\r\n\r\n  \tvar data = {\r\n  \t\t'name' : this.state.newCategory.name,\r\n      'color' : this.state.newCategory.color\r\n  \t};\r\n\r\n  \tCategoryDataService.create(data)\r\n      .then(response => {\r\n        this.setState({\r\n          newCategory : {\r\n  \t\t\t   name : '',\r\n           color : ''\r\n  \t\t  }\r\n        });\r\n        this.getCategories();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  }\r\n\r\n\r\n  render () {\r\n  \treturn (\r\n  \t\t<div className=\"location-library\">\r\n      <h2>Categories</h2>\r\n  \t\t<ul>\r\n\t\t      {this.state.categories && this.state.categories.length > 0 && this.state.categories.map(category => (\r\n\t\t      \t<li  key={category.id}>\r\n            <div className=\"card\">\r\n            <div className=\"card-body\">\r\n\t\t\t      \t<label htmlFor={\"name-\" + category.id}>Name</label>\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                className=\"form-control\"\r\n\t\t                id={\"name-\" + category.id}\r\n\t\t                value={category.name || ''}\r\n\t\t                onChange={(e) => this.onChangeName(category.id,e)}\r\n\t\t                />\r\n\t\t            \r\n                    \r\n                    <label htmlFor={\"color-\" + category.id}>Colour</label>\r\n                    <p className=\"small\">Hexcode, e.g. #ff0000</p>\r\n                    <input\r\n              type=\"text\"\r\n                    className=\"form-control\"\r\n                    id={\"color-\" + category.id}\r\n                    value={category.color || ''}\r\n                    onChange={(e) => this.onChangeColor(category.id,e)}\r\n                    />\r\n                \r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n\r\n\t\t            <button \r\n              type=\"button\" \r\n              onClick={(e) => this.onUpdate(e,category.id)}\r\n              className=\"btn btn-success\"\r\n              >\r\n                Update\r\n              </button>\r\n              <button \r\n              type=\"button\" \r\n              onClick={() => this.onRemove(category.id)}\r\n              className=\"btn btn-danger\"\r\n              >\r\n                Remove\r\n              </button>\r\n              <div className=\"status\">\r\n                {category.status}\r\n              </div>\r\n              </div>\r\n              </div>\r\n\t\t      \t</li>\r\n\t\t      ))}\r\n\t\t    </ul>\r\n\t\t    <div className=\"card\">\r\n\t\t\t    \r\n          <div className=\"card-body\">\r\n          <h4 className=\"card-title\">Add new category</h4>\r\n\t\t\t    <label htmlFor=\"new-name\">Name</label>\r\n\t\t\t    \t\r\n\t\t\t    \t<input\r\n\t\t\t\t    \ttype=\"text\"\r\n\t\t                  className=\"form-control\"\r\n\t\t                  id=\"new-name\"\r\n\t\t                  value={this.state.newCategory.name}\r\n\t\t                  onChange={this.onChangeNewName}\r\n                      required\r\n\t\t                  />\r\n\r\n                      <label htmlFor=\"new-color\">Colour</label>\r\n            \r\n            <input\r\n              type=\"text\"\r\n                      className=\"form-control\"\r\n                      id=\"new-color\"\r\n                      value={this.state.newCategory.color}\r\n                      onChange={this.onChangeNewColor}\r\n                      required\r\n                      />\r\n\r\n\r\n\t                  <button\r\n\t                  \ttype=\"button\"\r\n\t                  \tvalue=\"Upload\"\r\n\t                  \tonClick={this.onCreate}\r\n                      className=\"btn btn-primary\"\r\n\t                  \t>Add category</button>\r\n\r\n            </div>\r\n\t\t    </div>\r\n  \t\t</div>\r\n\t)\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport OptionsDataService from \"../services/options.service\";\r\nimport axios from 'axios';\r\nimport TiptapSimple from '../components/tiptap-simple.component';\r\n\r\n\r\n\r\nexport default class OptionsEditor extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  \tthis.getOptions = this.getOptions.bind(this);\r\n  \tthis.onChangeTextField = this.onChangeTextField.bind(this);\r\n    this.onChangeHomeText = this.onChangeHomeText.bind(this);\r\n  \tthis.onUpdate = this.onUpdate.bind(this);\r\n  \tthis.state = {\r\n      options : {\r\n        home_heading : '',\r\n        home_text :  '',\r\n        call_to_action_text :  '',\r\n        call_to_action_button :  '',\r\n        call_to_action_link :  ''\r\n      },\r\n      message  : '',\r\n      messageClass  : ''\r\n  \t}\r\n  }\r\n\r\n  componentDidMount() {\r\n  \tthis.getOptions();\r\n  }\r\n\r\n\r\n  getOptions(cb) {\r\n\t\tOptionsDataService.get(1)\r\n\t\t  .then(response => {\r\n        this.setState({\r\n          options : response.data\r\n        });\r\n        \r\n        \r\n        typeof cb === 'function' && cb();\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n\r\n  \t\r\n  }\r\n\r\n\r\n\r\n  onUpdate(e) {\r\n    e.preventDefault();\r\n    this.setState({\r\n      messageClass  : 'loading'\r\n    });\r\n\r\n  \tOptionsDataService.update(1, this.state.options)\r\n\t  \t.then(response => \r\n        this.setState({\r\n\t  \t\t   message : \"Options updated successfully\",\r\n           messageClass : 'success'\r\n\t  \t  })\r\n      )\r\n\t  \t.catch(e => {\r\n\t  \t\tconsole.log(e);\r\n        this.setState({\r\n          message : \"Unable to update options.\",\r\n           messageClass : 'danger'\r\n        });\r\n\t  \t});\r\n\r\n  }\r\n\r\n  onChangeTextField(e, field) {\r\n  \tthis.setState(prevState => {\r\n      var newOptions = prevState.options;\r\n      newOptions[field] = e.target.value;\r\n\r\n      return newOptions;\r\n    });\r\n  }\r\n\r\n  onChangeHomeText(home_text) {\r\n    this.setState(prevState => ({\r\n      options: {\r\n        ...prevState.options,\r\n        home_text: home_text\r\n      }\r\n    }));\r\n  }\r\n\r\n\r\n\r\n\r\n  render () {\r\n  \treturn (\r\n  \t\t<div>\r\n      <h2>Options</h2>\r\n\r\n\t\t    <div className=\"card\">\r\n\t\t\t    \r\n          <div className=\"card-body\">\r\n  \t\t\t    <label htmlFor=\"home_heading\">Home heading</label>\r\n  \t\t\t    \t\r\n  \t\t    \t<input\r\n  \t\t\t    \ttype=\"text\"\r\n              className=\"form-control\"\r\n              id=\"home_heading\"\r\n              value={this.state.options.home_heading || ''}\r\n              onChange={(e) => {this.onChangeTextField(e,\"home_heading\")}}\r\n              required\r\n              />\r\n\r\n            <label htmlFor=\"home_text\">Home text</label>\r\n            \r\n            <TiptapSimple\r\n              data-lpignore=\"true\"\r\n              id=\"home_text\"\r\n              content={this.state.options.home_text || ''} \r\n              onChange={this.onChangeHomeText} \r\n              />\r\n\r\n            <label htmlFor=\"call_to_action_text\">Call to action text</label>\r\n            <textarea\r\n              className=\"form-control\"\r\n              id=\"call_to_action_text\"\r\n              value={this.state.options.call_to_action_text || ''}\r\n              onChange={(e) => {this.onChangeTextField(e,\"call_to_action_text\")}}\r\n              required\r\n              />\r\n\r\n            <label htmlFor=\"call_to_action_link\">Call to action link</label>\r\n            <input\r\n              type=\"url\"\r\n              className=\"form-control\"\r\n              id=\"call_to_action_link\"\r\n              value={this.state.options.call_to_action_link || ''}\r\n              onChange={(e) => {this.onChangeTextField(e,\"call_to_action_link\")}}\r\n              required\r\n              />\r\n\r\n            <label htmlFor=\"call_to_action_button\">Call to action button text</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"call_to_action_button\"\r\n              value={this.state.options.call_to_action_button || ''}\r\n              onChange={(e) => {this.onChangeTextField(e,\"call_to_action_button\")}}\r\n              required\r\n              />\r\n              <br/>\r\n                     \r\n            <button\r\n            \ttype=\"button\"\r\n            \tvalue=\"Upload\"\r\n            \tonClick={this.onUpdate}\r\n              className=\"btn btn-primary\"\r\n            \t>Update</button>\r\n<br/><br/>\r\n               <p className={'alert alert-' + this.state.messageClass}>{this.state.message}</p>\r\n                  {this.state.messageClass=='loading' && (\r\n                    <div className=\"spinner-border text-secondary\" role=\"status\">\r\n                      <span className=\"sr-only\">Loading...</span>\r\n                    </div>\r\n                  )}\r\n\r\n            </div>\r\n\r\n           \r\n\t\t    </div>\r\n  \t\t</div>\r\n\t)\r\n  }\r\n}","import React, { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nimport \"./App.scss\";\n\nimport AddLocation from \"./components/add-location.component\";\nimport EditLocation from \"./components/edit-location.component\";\nimport LocationsList from \"./components/locations-list.component\";\nimport Location from \"./components/location.component\";\n\nimport AddUser from \"./components/add-user.component\";\nimport User from \"./components/user.component\";\nimport UsersList from \"./components/users-list.component\";\n\nimport AuthService from \"./services/auth.service\";\n\nimport PrivateRoute from \"./components/private-route.component\";\nimport Login from \"./components/login.component\";\nimport ResetPassword from \"./components/reset-password.component\";\nimport RequestToken from \"./components/request-token.component\";\nimport Home from \"./components/home.component\";\nimport Map from \"./components/map.component\";\nimport Profile from \"./components/profile.component\";\nimport CategoryList from \"./components/edit-category.component\";\nimport OptionsEditor from \"./components/edit-options.component\";\n\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\n\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.logOut = this.logOut.bind(this);\n\n    this.state = {\n      authCheckComplete:false,\n      isLoggedIn:false,\n      isMod: false,\n      isAdmin: false,\n      currentUser: undefined,\n    };\n\n    \n  }\n\n  componentDidMount() {\n    const user = AuthService.getCurrentUser();\n    console.log(\"user\");\n    console.log(user);\n    if (user) {\n      this.setState({\n        currentUser: user,\n        isLoggedIn:user?true:false,\n        isMod: user.roles.includes(\"ROLE_MODERATOR\"),\n        isAdmin: user.roles.includes(\"ROLE_ADMIN\"),\n      });\n    }\n    this.setState({\n      authCheckComplete : true\n    });\n  }\n\n  logOut() {\n    AuthService.logout();\n  }\n  render() {\n\n    const { currentUser, isLoggedIn, isMod, isAdmin, authCheckComplete } = this.state;\n    return (\n      <div>\n        <nav id=\"nav\" className=\"navbar navbar-expand navbar-light bg-dark\">\n        <div className=\"d-md-flex justify-content-between\">\n          \n\n          <div className=\"flex-item  navbar-nav order-md-1\">\n\n            {currentUser && (\n              <DropdownButton title=\"Manage\" menuAlign=\"left\" id=\"manage-menu\">\n                \n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/admin/locations\"} className=\"nav-link\">\n                      Locations\n                    </Link>\n                  </Dropdown.Item>\n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/admin/locations/add\"} className=\"nav-link\">\n                      Add New Location\n                    </Link>\n                  </Dropdown.Item>\n                  {isAdmin && (\n                <div>\n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/admin/users\"} className=\"nav-link\">\n                      Users\n                    </Link>\n                  </Dropdown.Item>\n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/admin/users/add\"} className=\"nav-link\">\n                      Add New User\n                    </Link>\n                  </Dropdown.Item>\n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/admin/categories\"} className=\"nav-link\">\n                      Categories\n                    </Link>\n                  </Dropdown.Item>\n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/admin/options\"} className=\"nav-link\">\n                      Options\n                    </Link>\n                  </Dropdown.Item>\n                  \n                \n                </div>\n              )}\n                  <Dropdown.Item as=\"button\">\n                    <Link to={\"/profile\"} className=\"nav-link\">\n                      My profile\n                    </Link>\n                  </Dropdown.Item>\n              </DropdownButton>\n            )}\n\n            \n              \n\n              \n\n              \n            \n            {currentUser ? (\n                \n                <div className=\"nav-item\">\n                  <a href=\"/login\" className=\"btn btn-action\" onClick={this.logOut}>\n                    Log out\n                  </a>\n              </div>\n            ) : (\n                <div className=\"nav-item d-none d-md-block\">\n                  <Link to={\"/login\"} className=\"btn btn-action\">\n                    Log in\n                  </Link>\n\n                \n              </div>\n            )}\n          </div>\n\n          <div className=\"flex-item  logo order-md-0\">\n            <a href=\"/\" className=\"navbar-brand\">\n              <img id=\"logo\" src=\"/img/sphc-logo.png\"/>\n            </a>\n            <a href=\"/\" className=\"navbar-brand navbar-brand-text\">\n              <span className=\"small\">Save Public Housing Collective</span><br/>\n              Public Housing Watch Victoria\n            </a>\n          </div>\n\n          </div>\n\n        </nav>\n\n        <div id=\"main\" className=\"container mt-3\">\n          \n            <Switch>\n              <Route exact path={[\"/\", \"/home\"]} component={Home} />\n\n              <Route exact path={[\"/map\"]} component={Map} />\n\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} exact path={[\"/admin/locations\"]} component={LocationsList} />\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} path={[\"/admin/locations/add\"]} component={AddLocation} />\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} path={[\"/admin/locations/:id\"]} component={EditLocation} />\n\n              <Route path={[\"/locations/:slug\"]} component={Location} />\n\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} exact path={[\"/admin/users\"]} component={UsersList} />\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} path={[\"/admin/users/add\"]} component={AddUser} />\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} path={[\"/admin/users/:id\"]} component={User} />\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} path={[\"/admin/categories\"]} component={CategoryList} />\n              <PrivateRoute auth={isAdmin} authCheckComplete={authCheckComplete} path={[\"/admin/options\"]} component={OptionsEditor} />\n\n              <PrivateRoute auth={isLoggedIn} authCheckComplete={authCheckComplete} exact path={[\"/profile\"]} component={Profile} />\n                                \n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/reset-password\" component={RequestToken} />\n              <Route path=\"/reset-password/:id/:token\" component={ResetPassword} />\n\n            </Switch>\n        \n        </div>\n        <div id=\"footer\">\n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col-sm-7\">\n              <h5>Save Public Housing Collective</h5>\n              <p>\n              We are a grassroots collective made up of local public housing estate residents and resident groups, neighbourhood friends of public housing, activist and advocacy groups, churches, legal professionals, academics and researchers. \nWe fight against the state-led abandonment of the human right to housing and the forced displacement of public housing residents through renewal programs. \nWe fight together for the protection of public housing residents’ rights to dwell in safe, secure and affordable homes and places. \n</p>\n{!currentUser && (\n                \n                \n                <div className=\"d-block d-md-none\">\n                  <Link to={\"/login\"} className=\"btn btn-action\">\n                    Log in\n                  </Link>\n\n                \n              </div>\n            )}\n</div>\n<div className=\"col-sm-4 offset-sm-1\">\n<h5>Connect with us</h5>\n                <a target=\"_blank\" href=\"https://www.savepublichousing.com/\">Website</a><br/>\n                <a target=\"_blank\" href=\"https://twitter.com/savepublichous\">Twitter</a><br/>\n                <a target=\"_blank\" href=\"https://www.facebook.com/savepublichousingcollective\">Facebook</a><br/>\n                <a target=\"_blank\" href=\"https://www.instagram.com/savepublichousingcollective/\">Instagram</a>\n                \n\n              <h5>Allies</h5>\n                <a target=\"_blank\" href=\"https://rahu.org.au/\">Renters & Housing Union</a>\n\n              \n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n \n}\n\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}